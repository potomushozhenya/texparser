
\noindent{\small УДК [004.338::004.085.3]:004.056.3  \hfill
{\scriptsize Вестник~СПбГУ.~Прикладная~математика%.~Информатика
...~\issueyear.~Т.~15.~Вып.~\issuenum}\\
MSC 93A30

}

\vskip2mm

\noindent{\bf Модель планирования количества оптических дисков,
необходимых\\ для создания и~поддержания долговременного электронного архива%$^{*}$%
 }

\vskip2.5mm

\noindent{\it  А. В. Чернышов%$\,^1$%
%, И.~О. Фамилия%$\,^2$%
}

\efootnote{
%%
%\vspace{-3mm}\parindent=7mm
%%
%\vskip 0.1mm $^{*}$ Работа выполнена при
%финансовой поддержке Российского научного фонда (проект №
%?). (The work was jointly supported by a grant
%from the Russian Science Foundation (Project N ?))\par
%%
%%\vskip 2.0mm
%%
\indent{\copyright} Санкт-Петербургский государственный
университет, \issueyear%
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\thispagestyle{empty} %очищаем стиль страницы
\thispagestyle{fancy} %включаем пользовательский стиль
\renewcommand{\headrulewidth}{0pt}%
\fancyhead[LO]{}%
\fancyhead[RE]{}%
\fancyfoot[LO]{{\footnotesize\rm{\doivyp/spbu10.\issueyear.\issuenum13 } }\hfill\thepage}%
\fancyfoot[RE]{\thepage\hfill{\footnotesize\rm{\doivyp/spbu10.\issueyear.\issuenum13}}}%
% для оформления нижнего колонтитула
\cfoot{} %

\vskip2mm

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

{\footnotesize

%\noindent%
%Санкт-Петербургский государственный университет, Российская
%Федерация,
%
%\noindent%
%\hskip2.45mm%
%199034, Санкт-Петербург, Университетская~наб., 7--9

\noindent%
%$^2$~%
Мытищинский филиал Московского государственного технического
университета им. Н. Э. Баумана,

\noindent%
%\hskip2.45mm%
Российская Федерация, 141005, Мытищи, Московская обл., 1-я
Институтская ул., 1

}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\vskip3mm

{\small \noindent \textbf{Для цитирования:} \textit{Чернышов А.
В.} Модель планирования количества оптических дисков, необходимых
для создания и~поддержания долговременного электронного архива~//
Вестник Санкт-Петербургского университета. Прикладная математика.
Информатика. Процессы управления. \issueyear. Т.~15.
Вып.~\issuenum.
С.~\pageref{p13}--\pageref{p13e}. %\\
\doivyp/\enskip%
\!\!\!spbu10.\issueyear.\issuenum13

\vskip3mm

{\leftskip=7mm\noindentВ статье предложена аналитическая модель,
позволяющая оценить количество оптических дисков, необходимых
ежегодно на создание и~поддержание в~целостном состоянии
электронного архива длительного хранения информации, а~также
связанных с~этими процессами затрат времени. Модель разработана
для архивов на базе одиночных дис\-ков (диски не объединены
в~структуры RAID). Исходными данными служили сле\-дую\-щие
параметры: предполагаемая (проектная) емкость архива; емкость
используемых оптических дисков; оценки времени записи, чтения
и~контроля целостности оптических дисков; время, выделяемое на
технические работы в~архиве (собственно запись новых данных,
контроль ранее записанных дисков, восстановление отказавших);
вероятность выхода из строя оптического диска при хранении;
вероятность выхода из строя диска при записи (брак). Рассмотрены
4~варианта функционирования архива в~зависимости от пропускной
способности аппаратуры и~описаны этапы функционирования каждого
варианта. Для каждого варианта выведены аналитические выражения,
дающие возможность оценить ежегодно необходимое количество
оптических дисков (что во многом определяет ежегодные материальные
затраты), а~также моменты времени смены этапов. Дополнительно для
некоторых вариантов получены выражения, позволяющие
оценить возможность достижения проектной емкости архива.\\[1mm]
\textit{Ключевые слова}: долговременные архивы электронной
информации, оптические диски, обеспечение целостности информации,
ежегодные затраты.

}

}

\vskip 4mm

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

{\bf Введение.} При организации и~эксплуатации долговременных
электронных архивных хранилищ наряду с~проблемой надежности
сохранения информации [1--4] и~ее доступности [5--7] существует
и~проблема затрат на поддержание архива. Согласно действующему
стандарту [8], для создания долговременных электронных архивов
должны использоваться только диски однократной записи, т.~е., как
правило, оптические диски типа CD-R, DVD+/-R, DB-R. Однако
особенности применяемой аппаратуры, организации процесса
размещения данных в~архиве и~контроля целостности хранимых дисков,
необходимость восстанавливать диски, отказавшие в~процессе
хранения, а~также интенсивность поступления самой информации
в~архив могут существенно влиять на параметры архива.

Вопросы построения и~исследования моделей надежности хранения
информации на оптических дисках, организованных в~различные
структуры, были рассмотрены в~статьях [9--12]. Этим же вопросам,
применительно к~использованию жестких дисков, были посвящены
многие публикации (например, [13--16]).

Вопросы планирования ежегодно необходимого количества оптических
дисков и~затрат времени для создания и~поддержания долговременных
архивов к~настоящему времени не исследованы.

В настоящей статье предложено построение модели ежегодно
необходимого количества оптических дисков и~затрат времени для
архивов, в~которых диски не объ\-единены в~структуры RAID
(рассматриваются как самостоятельные). Эти архивы широко
распространены на практике. Кроме того, именно на такие типы
архивов в~России разработаны методические рекомендации по их
созданию и~эксплуатации~[17--19]. Они являются привлекательными
для применения в~небольших ор\-га\-ни\-за\-циях, имеющих
существенные ограничения в~возможностях организации необходимого
по мощности IT-подразделения.


{\bf Общие соображения.} Обозначим максимальную (конструкционную)
емкость архива~$W$. Если необходимо сохранить больше информации,
то должен быть создан еще один архив емкостью~$W_1$, для которого
должны быть проведены полностью аналогичные расчеты. Для сравнения
также должны быть осуществлены расчеты для архива емкостью
$(W+W_1)$. Архивы создаются на оптических дисках однократной
записи емкостью $V$ и~стоимостью~$c$. Вероятность выхода из строя
диска с~записью\linebreak при хранении в~течение года
обозначим~$q$; вероятность отказа диска в~момент записи~---~$q_w$.

Пусть $t$ --- время в~годах существования архива; $T$ --- время
в~течение года, выделенное на технические работы в~архиве (запись
новых дисков и~контроль целостности ранее записанных). В~это время
не входит время доступа к~информации, пре\-до\-став\-ляе\-мое
пользователям архива.

Пусть изначальная стоимость необходимого аппаратного обеспечения
$C_{\hbox{\rm п}}$, а~затраты на создание и~поддержание архива
в~год с~номером $t$ составляют $C(t)$.

Дополнительно введем функцию  $f_C(t)$, описывающую стоимость
поддержания работоспособности этого оборудования в~год с~номером
$t$. Хотя обычно принято считать, что данный параметр должен
носить функциональный характер, но в~действительности очень часто
для конкретных типов аппаратуры вид такой функции неизвестен,
а~современные поставщики оборудования предпочитают указывать
ежегодные эксплуатационные расходы на поставляемое оборудование
в~виде постоянной суммы (например, 1/10 от стоимости приобретения,
как для роботизированной библиотеки оптических дисков Panasonic
LB-DH8 [20]). Потому здесь вид функции уточнять не будем.

Для заданного уровня надежности хранения информации необходимо
создать $n$ копий дисков.

Обозначим $l=\lceil W/V \rceil$ --- количество дисков емкости $V$,
которое обеспечивает запись информации объема $W$.

В действительности при создании и~эксплуатации таких архивов
возможны сле\-дую\-щие варианты (рисунок):

{\it 1} --- пропускная возможность аппаратуры не ограничена,
вследствие чего предельная емкость архива $W$ может оказаться
достигнутой уже в~первый год эксплуатации. В~таком случае
остальные годы затраты будут связаны исключительно с~задачами
хранения информации;

{\it 2} --- интенсивность поступления информации в~архив невысока
и стабильна (фактически, постоянна) или во всяком случае не
превышает некоторой заданной величины, что приводит к~заполнению
архива постепенно в~течение нескольких лет. Данный вариант
предполагает, что пропускная способность аппаратуры позволяет
выполнить запись новой информации и~контроль ранее записанной без
ограничений;

{\it 3} --- возможности применяемой аппаратуры (или организации
самого процесса) ограничивают скорость записи информации на
оптические диски (ограничена пропускная способность), что также
приводит к~тому, что архив будет заполняться в~течение нескольких
лет;

{\it 4} --- возможен <<комбинированный>> случай, когда сначала
скорость заполнения архива лимитируется интенсивностью поступления
информации, но по мере заполнения архива начинают сказываться
ограничения пропускной способности аппаратуры или применяемой
организации процесса.

Все четыре случая схематично показаны на рисунке, где каждый
столбик изображает время в~течение года, необходимое на
технические работы, причем незаштрихованная часть~--- это время
записи на диски новой информации, одинарная штриховка~--- время
контроля целостности ранее записанных дисков, двойная
штриховка~--- время восстановления вышедших из строя при хранении
дисков.

%\begin{figure}[h]
%\begin{center}
%%\includegraphics[width=\hsize]{../Pics/Ris_1.eps}
%\includegraphics[width=\hsize]{Chernyshov_ris.eps}
%\end{center}
%%\caption{Четыре варианта организации и~эксплуатации рассматриваемых архивов (объяснение в~тектсе)}
%\centerline{\small Рис.~1. Четыре варианта организации
%и~эксплуатации рассматриваемых архивов} \centerline{\small
%(объяснение в~тектсе)}
%\end{figure}

На рисунке $t_{\rm full}$ --- номер года, в~который архив достиг
проектной емкости $W$, \,$\tilde t$~--- номер года, в~который
достигнута пропускная способность аппаратуры (вариант~2 переходит
в вариант 3).


\begin{figure}[h!]
\centering{
\includegraphics[scale=0.95]{13/fig1}

\vskip 2mm {\small{\it Рисунок.} Четыре варианта организации
и~эксплуатации рассматриваемых архивов } \\

\vskip 0mm {\small (объяснение в~тексте) } }
\end{figure}




Здесь и~далее будем считать, что $q={\rm const}$, поскольку на
практике для реальных расчетов обычно удается получить только
точечную оценку ее математического ожидания.

Надо также заметить, что через 30 или 50 лет, когда закончится
срок эксплуатации оптических дисков (обычно указываемый
производителями), необходимо будет выполнить полную перезапись
информации на новые носители. Однако к~этому времени, скорее
всего, будут доступны совершенно другие технологии длительного
хранения электронной информации. Потому можно лишь предположить
(весьма условно), что $C(30)$ будет по <<структуре цены>>
соответствовать $C(1)$, $C(31)$~--- $C(2)$~и~т.~д.

{\bf Построение моделей.} \textbf{\textit{Модель варианта 1.}}
В~первый год будет записано (и~должно быть приобретено)
%
$$N(1)=
\left\lceil \frac{nl}{1-q_w} \right\rceil
$$
%
дисков с~учетом оказавшихся бракованными. При этом в~архиве будет
размещено $nl$ дисков. Запись $(1-q_w)$ позволяет учесть
дополнительные расходы, связанные с~некачественными экземплярами
дисков, отказывающими сразу после записи или даже в~процессе
записи.

Во второй и~каждый последующий годы из-за отказавших при хранении
дисков придется приобрести и~перезаписать
%
$$N(t)=
\left\lceil \frac{\lceil qnl\rceil}{1-q_w} \right\rceil \eqno(1)$$
%
дисков, имея в~виду, что при проведении ежегодного контроля
целостности дисков необходимо будет восстанавливать из запасных
копий $\lceil qnl\rceil$ отказавших дисков.

Формула (1) будет справедлива для всех рассматриваемых вариантов
при полностью заполненном архиве. Модель затрат на
создание/содержание такого архива:

--\,в~первый год $C(1)=cN(1)+C_{\hbox{\rm п}}$;

--\,\,во второй и~каждый последующий годы $C(t)=cN(t)+f_C(t)$,
\,$t>1$.

Таким образом, возможно вычислить ежегодно необходимое количество
оптических дисков, ежегодные затраты на работу с~архивом, а~также
суммарные затраты, которые понесет за $t$ лет владелец архива.



\textbf{\textit{Модель варианта 2.}} Интенсивность поступления
информации будет определять максимальный объем информации $W_y$,
записываемый в~год, количество записываемых дисков в~год $l_y$
и~общее количество записываемых дисков $nl_y$ с~учетом запасных
копий.

В данном случае важными являются два обстоятельства:

--\,\,$l_y={\rm const}$, $W_y={\rm const}$;

--\,\,значения $l_y$ и~$W_y$ не могут быть выше, чем позволяет
пропускная способность аппаратуры с~учетом необходимости контроля
на тех же самых приводах ранее записанных дисков в~последний год
записи. При этом все работы по записи новых дисков и~контролю
целостности, ранее записанных в~течение года, должны быть
выполнены за специально выделенное время $T$.

Пусть на запись одного диска требуется время $t_w$, включая
верификацию информации сразу после записи; на плановый контроль
одного диска --- время $t_{r0}$; для изготовления копии
отказавшего диска из запасной копии --- время $t_r+t_w$ (сначала
считать данные с~запасной копии и~выполнить верификацию считанных
данных ($t_r$), потом записать, включая верификацию). Будем
считать, что чтение информации с~запасной копии выполняется всегда
без сбоев (вероятность сбоя ничтожно мала, поскольку диск перед
этим был проверен). Тогда для произвольного года с~номером $t$
необходимо:

--\,\,проконтролировать $(t-1)nl_y$  дисков (были записаны
в~предыдущие $(t-1)$ годы), общее время контроля $(t-1)nl_y
t_{r0}$;

--\,\,записать новые диски с~учетом бракованных:
%
$$\left\lceil
\frac{nl_y}{1-q_w} \right\rceil;$$
%

--\,\,перезаписать отказавшие диски $\lceil (t-1)nl_y q\rceil$
и~на это потребуется приобрести дисков (также с~учетом
бракованных):
%
$$\left\lceil
\frac{\lceil(t-1)nl_y q\rceil} {1-q_w} \right\rceil;$$
%

--\,\,чтобы общее время записи новых дисков составляло
%
$$\left\lceil
\frac{nl_y}{1-q_w} \right\rceil t_w;$$
%

--\,\,чтобы время на перезапись отказавших дисков было равно
%
$$\lceil (t-1)nl_y q\rceil t_r +
\left\lceil \frac{\lceil(t-1)nl_y q\rceil} {1-q_w} \right\rceil
t_w.$$
%
Последняя запись предполагает, что в~случае сбоя при записи
перезаписываемого диска повторное считывание информации
с~запасного диска не требуется.

Тогда
%
$$T \ge
%
\left\lceil \frac{nl_y}{1-q_w} \right\rceil t_w +
%
(t-1)nl_y t_{r0} +
%
\lceil (t-1)nl_y q\rceil t_r +
%
\left\lceil \frac{\lceil(t-1)nl_y q\rceil} {1-q_w} \right\rceil
t_w.$$
%

\noindent Из получившегося выражения следует вычислить максимально
допустимое значение $l_y$, при котором такой вариант работы архива
будет иметь место. К~сожалению, множество операций приведения
к~целому не позволяет сделать это однозначно. Потому поступим
следующим образом~--- оценим граничные значения.

Для нижней границы просто уберем приведение к~<<верхнему>> целому
и получим, что
%
$$T\ge nl_y
\left( \frac{t_w}{1-q_w} + (t-1) \left(
t_{r0}+qt_r+\frac{qt_w}{1-q_w} \right) \right).$$
%
%
Для верхней границы, убирая каждое приведение к~целому, добавим 1:
%
$$T<
\left( \frac{nl_y}{1-q_w} +1 \right) +
%
(t-1)nl_y t_{r0} +
%
\left( (t-1)nl_y q +1 \right) t_r +
%
\left( \frac{(t-1)nl_y q+1} {1-q_w} +1 \right) t_w.$$
%
После этого имеем
%
$$T\ge nl_y
\left( \frac{t_w}{1-q_w} + (t-1) \left(
t_{r0}+qt_r+\frac{qt_w}{1-q_w} \right) \right) +
2t_w+t_r+\frac{t_w}{1-q_w}.$$
%
Обозначим
%
$$A=\frac{t_w}{1-q_w},\quad
B=t_{r0}+qt_r+\frac{qt_w}{1-q_w},\quad
t_{wr}=2t_w+t_r+\frac{t_w}{1-q_w}.$$
%
Тогда после очевидных преобразований будем иметь
%
$$\frac{T-t_{wr}}{n(A+(t-1)B)} <
l_y \le \frac{T}{n(A+(t-1)B)}. \eqno(2)$$
%

Расчеты, проведенные с~реальными значениями параметров,
показывают, что обычно разность левой и~правой частей не превышает
1 диска. Поэтому, исходя из условий задачи, окончательно находим
%
$$l_y = \left\lfloor
\frac{T}{n(A+(t-1)B)} \right\rfloor.$$
%

Для использования формулы, кроме знания величин $t_w$, $t_r$,
$t_{r0}$, которые характеризуют и~пропускную способность
аппаратуры, и~применяемые диски, а~также $q$ и~$q_w$, оценивающих
такие диски, необходимо также определить время (номер года)
заполнения архива $t_{\rm full}$.

Выполним это следующим образом.

Хотя в~последний год записи архива для достижения полной емкости
архива $W$ и~может потребоваться записать меньше, чем $l_y$
дисков, в~предельном случае будем иметь соотношение (2). При этом
$ l_y t_{\rm full} \ge l= \lceil W/V \rceil $, т.~е. $ l_y\ge
l/t_{\rm full}$, следовательно,
%
$$\frac{nl(A-B)}{T-nBl} \le
t_{\rm full} < \frac{nl(A-B)}{T-t_{wr}-nBl} ,$$
%
что по условиям задачи ($t$ --- целое количество лет) дает
%
$$t_{\rm full}=
\left\lceil \frac{nl(A-B)}{T-nBl} \right\rceil.$$
%

Так как рассматриваются годичные циклы эксплуатации архива, то
$t_{\rm full}$ должно быть округлено до большего целого, но
в~последний год, вероятнее всего, будет записано меньше, чем
$l_y$, дисков.

В произвольный год с~номером $t$ ($t<t_{\rm full}$) необходимо
будет приобрести для записи
%
$$N(t)=
\left\lceil \frac{nl_y}{1-q_w} \right\rceil +
%
\left\lceil \frac{\lceil (t-1)nl_y q \rceil}{1-q_w} \right\rceil
\eqno(3)$$
%
дисков (эта формула справедлива для любого года, начиная с~$t=1$).

При $t>t_{\rm full}$ количество дисков, приобретаемых ежегодно на
поддержание архива, будет полностью соответствовать записанному
ранее выражению (1).

Важно подчеркнуть, что необходимо получить $t_{\rm full}<30$, если
считать, что срок службы оптических дисков составляет 30 лет.
В~противном случае должны быть скорректированы исходные данные
(например, либо уменьшен размер создаваемого архива $W$, либо
обеспечена большая интенсивность поступления информации, если это
позволяет пропускная способность аппаратуры).




\textbf{\textit{Модель варианта 3.}} В~этом случае $l_y=l_f(t)\ne
{\rm const}$.

В первый год ($t=1$) можно записать максимальное количество
дисков. При этом
%
$$T\ge
\left\lceil \frac{nl_f(1)}{1-q_w} \right\rceil t_w,$$
%
откуда, используя выполненные выше обозначения, $nl_f(1)A\le T <
nl_f(1)A+t_w$,  после преобразований получим выражение
%
$$\frac{T-t_w}{nA} <
l_f(1) \le \frac{T}{nA}.$$
%

С учетом физического смысла решаемой задачи можно записать, что
%
$$l_f(1)=
\left\lfloor \frac{T}{nA} \right\rfloor .$$
%

В последующие годы количество записываемых дисков вынужденно
уменьшится, так как часть пропускной способности системы уйдет на
контроль целостности ранее записанных дисков и~восстановление
отказавших. Для любого последующего года получим неравенство
%
$$ T\ge
\left\lceil \frac{nl_f(t)}{1-q_w} \right\rceil t_w +
%
nt_{r0}\sum_{i=1}^{t-1} l_f(i) +
%
\left\lceil nq \sum_{i=1}^{t-1} l_f(i) \right\rceil t_r +
%
\left\lceil \frac{nq \sum_{i=1}^{t-1} l_f(i)} {1-q_w} \right\rceil
t_w.$$
%

Раскрывая ограничения целочисленности использованным выше
способом, введя обозначение
%
$$t_{wr1}=t_r+\frac{t_w}{1-q_w}+t_w$$
%
и применяя приведенные ранее обозначения, находим, что
%
$$\frac{T-t_w}{nA}-\frac{t_{wr1}}{nA}-\frac{B}{A}
\sum_{i=1}^{t-1} l_f(i) < l_f(t) \le \frac{T}{nA}-\frac{B}{A}
\sum_{i=1}^{t-1} l_f(i) .$$
%
%
В полученной формуле присутствуют рекурсивные суммы, от которых
желательно избавиться.

Довольно просто показать (мы этого делать не будем), что
справедливы такие выражения:
%
$$f(t)=x-y-z\sum_{i=1}^{t-1} f(i) = x(1-z)^{t-1} - y(1-z)^{t-2},\quad
t>1,\quad f(1)=x,\eqno(4)$$
%
$$f(t)=x-z\sum_{i=1}^{t-1} f(i) = x(1-z)^{t-1} ,\quad
t\ge 1,\eqno(5)$$
%
следовательно, можно записать неравенство
%
$$\frac{T-t_w}{nA}
\left( 1-\frac{B}{A} \right)^{t-1} - \frac{t_{wr1}}{nA} \left(
1-\frac{B}{A} \right)^{t-2} < l_f(t) \le \frac{T}{nA} \left(
1-\frac{B}{A} \right)^{t-1} .$$
%


Если сейчас выполнить вычисления с~реальными значениями параметров
для левой и~правой частей этого неравенства для нескольких
значений $t$, то можно увидеть, что разница между ними не
превышает 1. Поскольку в~конечном итоге необходимо оценить
количество оптических дисков (целое число), мы не сделаем большой
ошибки, если в~дальнейшем везде будем использовать для оценок
правую часть неравенства, что значительно упростит выкладки. Тогда
будем иметь уравнение
%
$$l_f(t)=
\left\lfloor \frac{T}{nA} \left( 1-\frac{B}{A} \right)^{t-1}
\right\rfloor .$$
%
%
В этом случае с~учетом восстанавливаемых дисков в~год с~номером
$t$ необходимо будет записывать
%
$$N(t)=
\left\lceil \frac{nl_f(t)}{1-q_w} \right\rceil +
%
\left\lceil \frac{\left\lceil qn\sum_{i=1}^{t-1} l_f(i)
\right\rceil} {1-q_w} \right\rceil .$$
%


Для расчета $\sum_{i=1}^{t-1} l_f(i)$ воспользуемся установленным
выше фактом (5). Выполнив несложные преобразования, получим, что
%
$$\sum_{i=1}^{t-1} l_f(i)=\frac{T}{nB}
\left( 1- \left(1-\frac{B}{A} \right)^{t-1} \right). \eqno(6)$$
%
%
Тогда
%
$$N(t)=
\left\lceil \frac{n}{1-q_w} \left\lfloor \frac{T}{nA} \left(
1-\frac{B}{A} \right)^{t-1} \right\rfloor \right\rceil +
%
\left\lceil \frac{1}{1-q_w} \left\lceil qn \left( \frac{T}{nB}
\left( 1- \left( 1-\frac{B}{A} \right)^{t-1} \right) \right)
\right\rceil \right\rceil .$$
%

Интерес представляет вычисление значения $t_{\rm full}$. Определим
его из соотношения
%
$$ l\le \sum_{i=1}^{t_{\rm full}} l_f(i).$$
%
%
Неравенство здесь означает, что в~последний год записи количество
реально записанных дисков может оказаться меньше модельного
значения $l_f(t_{\rm full})$. Принимая во внимание выражение (6)
и~выполнив очевидные преобразования, находим, что
%
$$ 1- \frac{nBl}{T} \ge \left(
1-\frac{B}{A} \right)^{t_{\rm full}}.$$
%
В результате получим неравенство
%
$$t_{\rm full}\ge \log_{(1-B/A)} \left(
1- \frac{nBl}{T} \right),$$
%
что по смыслу решаемой задачи дает
%
$$t_{\rm full}=\left\lceil
\log_{(1-B/A)} \left( 1- \frac{nBl}{T} \right) \right\rceil .$$
%

Как и~ранее, при $t>t_{\rm full}$ для поддержания архива
необходимо будет приобретать $N(t)$ (см.~(1)) дисков. И точно
также должно выполняться ограничение $t_{\rm full}<30$.

В действительности размер создаваемого архива может ограничиваться
также из-за того, что, начиная с~некоторого года записи информации
$t_f$, выделенного времени $T$ будет хватать только на контроль
целостности и~восстановление ранее записанных дисков, что не
позволит продолжить заполнение архива и~плановый объем $W$ никогда
не сможет быть достигнут. Оценим значение  $t_f$ из соотношения
$l_f(t_f)<1$. Для упрощения дальнейших рассуждений выполним только
верхнюю оценку. Тогда
%
$$ \frac{T}{nA} \left(
1-\frac{B}{A} \right)^{t_f -1} <1,$$
%
т.~е.
%
$$ t_f > \log_{(1-B/A)} \left(
\frac{nA}{T} \right) +1,$$
%
что по смыслу решаемой задачи дает
%
$$ t_f=\left\lceil
\log_{(1-B/A)} \left( \frac{nA}{T} \right) \right\rceil +1.$$
%

Для того чтобы объем архива $W$ в~принципе мог быть достигнут,
должно выполниться условие $t_{\rm full}< t_f$.





\textbf{\textit{Модель варианта 4.}} В~данном случае процесс
функционирования архива распадается на следующие этапы:

--\,\,этап 1 условно соответствует ситуации варианта 2, когда
$l_y={\rm const}=\lceil W_y/V \rceil$ вплоть до момента, когда оно
окажется ограничено пропускной способностью аппаратуры с~учетом
необходимости контроля ранее записанных дисков;

--\,\,этап 2 условно соответствует варианту 3, когда количество
информации, за\-пи\-сы\-вае\-мой в~год (и соответственно
количество записанных дисков), будет постепенно уменьшаться из-за
необходимости тратить пропускную способность аппаратуры на
контроль ранее записанных дисков, количество которых будет
ежегодно возрастать;

--\,\,этап 3 соответствует состоянию <<только хранение>> ---
наступает после того, как будет достигнут плановый объем архива
$W$, и~полностью отвечает аналогичному со\-стоя\-нию
в~рассмотренных выше моделях.

Необходимо оценить, когда этап 1 закончится и~начнется этап 2.

Обозначим $\tilde t$ количество лет, в~течение которых $l_y={\rm
const}$ (т.~е. длится этап 1). В~этом случае
%
$$ T\ge
\left\lceil \frac{nl_y}{1-q_w} \right\rceil t_w +
%
(\tilde t -1) nl_y t_{r0} +
%
\lceil (\tilde t -1)nl_y q \rceil t_r +
%
\left\lceil \frac{\lceil(\tilde t -1)nl_y q\rceil}{1-q_w}
\right\rceil t_w .$$
%
И, как и~ранее,
%
$$\frac{T-t_{wr}-nAl_y}{nBl_y}+1 <
\tilde  t \le \frac{T-nAl_y}{nBl_y}+1,$$
%
т.~е.
%
$$\tilde t= \left\lfloor
\frac{T-nAl_y}{nBl_y} \right\rfloor +1.$$
%

В течение этого периода времени в~год потребуется записывать всего
$N(t)$ (см.~(3)) дисков. Аналогично варианту 2 рассчитываются
и~ежегодные затраты на создание и~поддержание архива. При этом за
этап 1 в~архиве окажется всего $n\tilde t l_y$ дисков.

Теперь рассмотрим процесс дальнейшего заполнения архива на этапе
2. Он начнется с~года $t=\tilde t +1$. Количество дисков,
записываемых в~год, теперь представляет собой функцию $l_f(t)$.
Для любого такого года имеем неравенство
%
%\begin{multline*}
\begin{gather*}
T\ge \left\lceil \frac{nl_f(t)}{1-q_w} \right\rceil t_w +
%
t_{r0}n \left( \tilde t l_y+\sum_{i=1}^{t-\tilde t-1} l_f(\tilde
t+i) \right) +
%
\left\lceil qn \left( \tilde t l_y+\sum_{i=1}^{t-\tilde t-1}
l_f(\tilde t+i) \right)
\right\rceil t_r\;+  \\
%
+ \left\lceil \frac{ \left\lceil qn \left( \tilde t
l_y+\sum_{i=1}^{t-\tilde t-1} l_f(\tilde t+i) \right) \right\rceil
}{1-q_w} \right\rceil t_w .
\end{gather*}
%\end{multline*}
%
Действуя по применявшейся ранее схеме, для года $t>\tilde t$
получим выражение
%
$$\frac{T-t_{wr}}{nA}-
\tilde t l_y \frac{B}{A} - \frac{B}{A}\sum_{i=1}^{t-\tilde t-1}
l_f(\tilde t +i) < l_f(t) \le \frac{T}{nA}- \tilde t l_y
\frac{B}{A} - \frac{B}{A}\sum_{i=1}^{t-\tilde t-1} l_f(\tilde t
+i).$$
%

Приняв $\circ t=t-\tilde t$, запишем неравенство
%
$$l_f(\circ t)\le
\frac{T}{nA}- \tilde t l_y\frac{B}{A}-
\frac{B}{A}\sum_{i=1}^{\circ t-1} l_f(i).$$
%
В отличие от случая в~(4), здесь член  $\tilde  t l_y(B/A)$ будет
присутствовать во всех итерациях (для всех $\circ t$). Поэтому
можно обозначить, что
%
$$D=\frac{T}{nA}-\tilde t l_y\frac{B}{A}.$$
%
Тогда, воспользовавшись (5), имеем, что
%
$$l_f(\circ t)\le D \left(
1-\frac{B}{A} \right)^{\circ t-1} ,$$
%
т.~е.
%
$$ l_f(t)= \left\lfloor
\left( \frac{T}{nA}-\tilde t l_y\frac{B}{A} \right) \left(
1-\frac{B}{A} \right)^{t-\tilde t -1} \right\rfloor ,\quad
t>\tilde t.$$
%
При этом в~год $t$ ($t>\tilde t$) для поддержания архива надо
будет записать дисков (с~учетом брака)
%
$$N(t)=
\left\lceil \frac{nl_f(t)}{1-q_w} \right\rceil +
%
\left\lceil \frac{\left\lceil qn \left( \tilde t
l_y+\sum_{i=1}^{t-\tilde t-1} l_f(\tilde t+i) \right)
\right\rceil}{1-q_w} \right\rceil .$$
%
Приняв во внимание, что
%
$$l_f(t)\le
D-\frac{B}{A}\sum_{i=1}^{t-\tilde t -1} l_f(\tilde t +i) = D\left(
1-\frac{B}{A} \right)^{t-\tilde t -1} ,$$
%
получим равенство
%
$$ \sum_{i=1}^{t-\tilde t -1} l_f(\tilde t +i)=
\frac{DA}{B} \left( 1- \left( 1-\frac{B}{A} \right)^{t-\tilde t
-1} \right) .\eqno(7)$$
%
Тогда
%
%$$
%\begin{multline*}
\begin{gather*}
N(t)= \left\lceil \frac{n}{1-q_w} \left\lfloor \left(
\frac{T}{nA}-\tilde t l_y\frac{B}{A} \right) \left( 1-\frac{B}{A}
\right)^{t-\tilde t-1} \right\rfloor
\right\rceil + \\
%
+\left\lceil \frac{1}{1-q_w} \left\lceil qn \left( \tilde t
l_y+\frac{DA}{B} \left( 1- \left( 1-\frac{B}{A} \right)^{t-\tilde
t-1} \right) \right) \right\rceil \right\rceil .
\end{gather*}
%\end{multline*}
%$$
%
Архив будет окончательно заполнен не позднее года с~номером
$t_{\rm full}$. Определим его из соотношения
%
$$l\le
\tilde t l_y + \sum_{i=1}^{t_{\rm full}-\tilde t} l_f(\tilde t+i)
.$$
%
Принимая во внимание (7), имеем
%
$$l\le
\tilde t l_y + \frac{DA}{B} \left( 1- \left( 1-\frac{B}{A}
\right)^{t_{\rm full}-\tilde t} \right) .$$
%
После преобразования получим неравенство
%
$$t_{\rm full}\ge
\log_{(1-B/A)} \left( 1+\frac{B}{DA}(\tilde t l_y -l) \right)
+\tilde t,$$
%
следовательно, исходя из физического смысла задачи,
%
$$t_{\rm full}= \left\lceil
\log_{(1-B/A)} \left( 1+\frac{B}{DA}(\tilde t l_y -l)
\right)\right\rceil +\tilde t.$$
%

Как и~ранее, при $t>t_{\rm full}$ для поддержания архива
необходимо будет приобретать $N(t)$  (см.~(1)) дисков. И также
должно выполняться
 $t_{\rm full}<30$.
Оценим, аналогично варианту~3, принципиальную возможность
заполнения всего объема~$W$ архива, рассчитав номер года~$t_f$,
после которого запись дисков с~новой информацией окажется
невозможной из-за необходимости расходовать все время $T$ на
поддержание архива. Изначально имеем~$l_f(t_f)<1$,~т.~е.
%
$$\left(
\frac{T}{nA}-\tilde t l_y\frac{B}{A} \right)\left( 1-\frac{B}{A}
\right)^{t_f-\tilde t -1} <1.$$
%
В конечном итоге находим, что
%
$$t_f= \left\lceil
\log_{(1-B/A)} \left( \frac{1}{ \frac{T}{nA}-\tilde t l_y
\frac{B}{A} } \right) \right\rceil +\tilde t +1.$$
%

{\bf Заключение.} В~статье рассмотрена задача построения модели
ежегодно необходимого количества оптических дисков для архивов,
в~которых диски не объединены в~структуры RAID. Рассмотрены
возможные варианты функционирования таких архивов и~определены
ключевые параметры этапов их функционирования (время полного
заполнения и~др.), для оценки которых также построены
аналитические модели.

Эти модели позволяют оценить материальные затраты на создание
и~обслуживание электронного архива (количество ежегодно
приобретаемых дисков), а~также необходимые затраты времени
и~предельные значения параметров архива (время заполнения,
максимально достигаемый объем).


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\newpage
\input{13/lit-ra}

%\newpage
\input{13/ref-s}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

{\footnotesize

%\thispagestyle{empty}
%
\vskip 3mm
%
\thispagestyle{empty} %очищаем стиль страницы
\thispagestyle{fancy} %включаем пользовательский стиль
\renewcommand{\headrulewidth}{0pt}%
\fancyhead[LO]{}%
\fancyhead[RE]{}%
\fancyfoot[LO]{\footnotesize{\rm{Вестник~СПбГУ.~Прикладная~математика.~Информатика...~\issueyear.~Т.~15.~Вып.~\issuenum}}
\hfill}%
\fancyfoot[RE]{\hfill\footnotesize{\rm{Вестник~СПбГУ.~Прикладная~математика.~Информатика...~\issueyear.~Т.~15.~Вып.~\issuenum}}}%
% для оформления нижнего колонтитула
\cfoot{} %
%
}
