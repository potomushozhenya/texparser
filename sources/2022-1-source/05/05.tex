


\noindent{\small УДК 519.178  \hfill {\footnotesize Вестник~СПбГУ.~Прикладная~математика.~Информатика...~\issueyear.~Т.~18.~Вып.~\issuenum}\\
MSC 05C70

}

\vskip3
mm

\noindent{\bf Методы теории кооперативных игр в задаче ранжирования текстов%$^{*}$%
 }

\vskip3
mm

\noindent{\it В. В. Мазалов$^{1,2}$, В. А. Хитрая$^{1,2}$, А. В. Хитрый$^{1}$%
%, И.~О. Фамилия%$\,^2$%
}

\efootnote{
%%
%\vspace{-3mm}\parindent=7mm
%%
%\vskip 0.1mm $^{*}$ Работа выполнена при%
%финансовой поддержке Российского%
%фонда фундаментальных исследований%
%(грант № 19-01-00146-a).\par%
%%
%%\vskip 2.0mm
%%
\indent{\copyright} Санкт-Петербургский государственный
университет, \issueyear%
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\thispagestyle{empty} %очищаем стиль страницы
\thispagestyle{fancy} %включаем пользовательский стиль
\renewcommand{\headrulewidth}{0pt}%
\fancyhead[LO]{}%
\fancyhead[RE]{}%
\fancyfoot[LO]{{\footnotesize\rm{\doivyp/spbu10.\issueyear.\issuenum05} }\hfill\thepage}%
\fancyfoot[RE]{\thepage\hfill{\footnotesize\rm{\doivyp/spbu10.\issueyear.\issuenum05}}}%
% для оформления нижнего колонтитула
\cfoot{} %

\vskip3mm

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

{\footnotesize


\noindent%
$^1$~%
Федеральный исследовательский центр <<Карельский научный центр

\noindent%
\hskip2.45mm%
Российской академии наук>>, Российская Федерация,

\noindent%
\hskip2.45mm%
185910, Петрозаводск, ул. Пушкинская, 11




\noindent%
$^2$~
Петрозаводский государственный университет, Российская Федерация,

\noindent%
\hskip2.45mm%
185910, Петрозаводск, ул. Ленина, 33

}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\vskip3
mm

{\small \noindent \textbf{Для цитирования:}
\textit{Мазалов В. В., Хитрая В. А., Хитрый А. В.} Методы теории кооперативных игр в задаче ранжирования текстов~//
Вестник Санкт-Пе\-тер\-бург\-ского университета. Прикладная
математика. Информатика. Процессы управления. \issueyear. Т.~18.
Вып.~\issuenum.
С.~\pageref{p5}--\pageref{p5e}. %\\
\doivyp/\enskip%
\!\!\!spbu10.\issueyear.\issuenum05

\vskip3
mm

{\leftskip=7mm\noindentПредлагается метод ранжирования корпуса текстов новостного портала на основе мер центральности графа. Каждому тексту ставится в соответствие вершина некоторого графа, а его структура определяется на основе семантической связности текстов. В качестве меры центральности используется значение Майерсона в кооперативной игре на графе, где как характеристическая функция выбрано число простых путей в  подграфе определенной длины \emph{m}. Для значений \emph{m} ранжирование на базе значений Майерсона будет различным.  Для окончательного ранжирования предлагается применить процедуру ранжирования с помощью турнирной матрицы. Работа алгоритма ранжирования проиллюстрирована на численных примерах, связанных с конкретным порталом но\-востей.\\[1mm]
\textit{Ключевые слова}: корпус текстов новостей, граф, мера центральности, значение Майерсона, турнирная матрица, процедура ранжирования.

}

}

\vskip 4
mm

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\textbf{1. Введение. }В связи с развитием Интернета значительно возросло количество текстовой информации. Агрегаторы, поисковики, а также различные интеллектуальные системы структурирования информации применяют множество методов для связи информационных потоков. Одними из наиболее часто используемых подходов являются построение графовых моделей и их дальнейший анализ. Такие модели могут быть построены на основе выделения семантических связей в корпусе текстов [1].

Существует устоявшийся процесс обработки текстов, который позволяет выделять семантическую связанность на основе содержания. Он состоит из очистки текста, приведения слов к минимальной форме и построения векторной модели корпуса [2], которая дает возможность изучения текстов уже безотносительно их конкретного содержания.

Классической задачей анализа корпуса текстов или набора документов (веб-стра\-ниц) является ранжирование. Данная процедура позволяет определить, какой из документов является  ключевым в наборе, и выдать релевантную информацию в~виде сортированного по рангу списка документов. К таким алгоритмам относится PageRank, разработанный Сергеем Брином и Ларри Пейджем в рамках исследовательского проекта BackRub для анализа связей между веб-страницами [3].


В графовых моделях для ранжирования можно использовать  меры центральности вершин и ребер графа [4--10]. Центральность вершины отражает, насколько хорошо рассматриваемая вершина расположена на путях, которые соединяют остальные вершины, и соответственно, насколько активно вершина участвует в процессе распространения информации между остальными вершинами в графе. Для определения меры центральности вершин предлагается применять методы теории кооперативных игр, в частности значение Майерсона  [10--14]. В работе [15] для ранжирования рекомендован метод максимального правдоподобия.

В настоящей работе продемонстрировано, как методы теории кооперативных игр могут быть использованы для решения задачи определения центральности вершин графа и последующего их ранжирования. Была построена графовая модель корпуса текстов новостного портала, для которой проведена процедура ранжирования тремя методами, и сравнены полученные результаты.

Статья построена следующим образом. В п. 2 рассмотрен алгоритм построения графовой модели для анализа корпуса текстов, в п. 3 описаны методы теории кооперативных игр, которые могут быть применены для ранжирования текстов при использовании графовой модели. В п. 4 описан процесс построения графовой модели для эксперимента на основе коллекции новостных текстов, в п. 5 приведены результаты ранжирования текстов новостного портала с помощью модифицированного метода Майерсона, алгоритма PageRank, а также по правилу Борда.



\textbf{2. Построение графовой модели связей множества текстов. }Изучим коллекцию документов $D$. Заранее неизвестно, объединены ли эти документы конкретной тематикой и схожи ли они по смыслу. Определим степень сходства документов из коллекции $D$.

В первую очередь необходимо очистить документы от слов и символов, которые не представляют реального интереса при построении модели. Удаляются пунктуа\-цион\-ные символы и так называемые «стоп-слова» (местоимения, предлоги, междометия и т. п.). Оставшиеся слова формируют множество слов, содержащихся в коллекции $D$. Обозначим его $W$.

\textbf{Пример 1.1.}
Продемонстрируем этапы обработки текста на примере отрывка новости. Исходный текст:

Эскиз балета «Анна Каренина». Музыка P. Щедрина, хореограф-постановщик Кирилл Симонов. Главы из романа Л. Толстого <<Анна Каренина>> читает Марина Перелешина (Москва) (16+). Музыкальный театр. По входным билетам.

На первом этапе произведена техническая очистка текста:

эскиз балета анна каренина музыка р щедрина хореограф постановщик кирилл симонов главы из романа л толстого анна каренина читает марина перелешина москва музыкальный театр по входным билетам

Для каждого слова $w_i \in W$ выделим лексему  $l_j$ [16], которая представляет собой совокупность всех значений и грамматических форм слова в языке.  Общее число лексем $n$ не превосходит общее число слов коллекции. Выделенные лексемы формируют множество лексем $L$. Одним из методов выделения лексем является стемминг [17]: cлово, если это возможно, приводится к минимальной форме, для чего удаляются суффиксы, приставки, окончания. При необходимости процесс может быть повторен несколько раз. Наиболее распространен метод стемминга Портера, подробное описание которого можно найти в [18].

\textbf{Пример 1.2.} Для текста, приведенного выше, запишем набор слов, из которых формируются лексемы после удаления «стоп-слов»:

эскиз балет ан каренин музык р щедрин хореограф постановщик кирилл симон глав рома л толст ан каренин чита марин перелешин москв музыкальн театр входн билет.

Одним из методов анализа документа без учета синтаксической структуры или порядка слов в тексте является подсчет количества появлений слова в тексте. Для этого с помощью полученных лексем может быть сформирован так называемый мешок слов [19] документа $d \in  D$:
\begin{equation*}
b(d) = (b_{l_1}, b_{l_2}, ..., b_{l_n}),\\
\end{equation}
где $b_{l_j}$ --- число слов в документе $d$, порождающих лексему $l_j $.

Построенный таким образом мешок слов имеет явно выраженную особенность. Существуют лексемы, которые будут часто встречаться в любых случайно выбранных текстах, причем в зависимости от размера документа такие лексемы могут иметь б\'{о}льший вес, чем те, которые определяют его семантику.
Для того чтобы понизить их значимость в мешке слов, были созданы специальные методы, основанные на рассмотрении корпуса целиком, а не отдельного документа. Один из таких методов --- применение статистической меры TF-IDF для оценки важности лексемы при анализе коллекции документов. В простейшем случае важность лексемы (или ее вес) прямо пропорциональна частоте использования лексемы в конкретном документе ${tf}_{l,d}$ и обратно пропорциональна частоте, с которой она встречается в коллекции документов, ${df}_{l}$ [20]. Обычно в формуле для вычисления меры используется обратное значение ${idf}_{l}=\frac{1}{{df}_{l}}$. Тогда значение меры для лексемы $l$ в документе $d$ определяется следующим образом:
\begin{equation*}
f_{l, d} = {tf}_{l, d} \cdot {idf}_{l}.
\end{equation*}
Введем вектор ${F}_{d} $ --- вектор мер лексем, содержащихся в документе $d$:
\begin{equation*}
F_{d} = (f_{1, d}, ..., f_{n, d}).
\end{equation*}

На основе набора векторов мер лексем для $M$ документов из коллекции $D$ можно рассчитать симметричную матрицу сходства векторов $C$, состоящую из элементов
$$c_{i, j} = \cos{(F_{d_i}, F_{d_j})} = \frac{F_{d_i} \cdot F_{d_j}}{\|F_{d_i}\|\|F_{d_j}\|},$$
которую можно интерпретировать как матрицу сходства документов из коллекции~$D$:
\begin{equation*}
    C = \begin{pmatrix}
        c_{1,1} & ... & c_{M,1}\\
        ... & & ...\\
        c_{1,M} & ... & c_{M,M}
        \end{pmatrix}.
\end{equation}


В свою очередь, по матрице $C$ может быть построена матрица $I$. Для этого зададим пороговое значение $c_{th}$ такое, что
\begin{equation*}
     I_{i, j} =
    \begin{cases}
      1, & \text{если $c_{i, j} > c_{th}$,  $j \neq i,$}\\
      0, & \text{иначе,}\\
    \end{cases} \text{~\hspace*{3mm} $i, j = 1,...,M.$}
 \end{equation*}
 Пороговая величина $c_{th}$ выбирается эмпирически в зависимости от определения достаточной семантической связи между документами. Чем она больше, тем более семантически связанными оказываются пары документов, для которых в матрице получены значения, равные 1. Построенная таким образом матрица $I$ может рассматриваться как матрица смежности для некоторого неориентированного графа $G$, который может применяться в качестве графовой модели корпуса текстов.

\textbf{3. Ранжирование текстов на основе теории кооперативных игр. }

\textbf{\emph{3.1. Значение Майерсона}. }
При использовании графовой модели ранжирование текстов представляет собой поиск значений центральности вершин графа $G$, описываемого с помощью матрицы смежности $I$.
Для определения центральности вершин в графе может быть применен теоретико-игровой подход. Определим на графе $G=(V,E)$, где $V$ --- множество вершин и $E$ --- множество ребер, а также кооперативную игру $\Gamma=<V,v>$, $|V|=n$. В этой игре вершины служат игроками, а характеристическая функция $v(K), K\subset V$, определяется как количество простых путей длины $m$ в подграфе, порожденном множеством вершин $K$.
Число $m=1,2,\dots$ фиксировано. Очевидно, что функция $v(K)$ является монотонной, т. е. $v(K_1)\le v(K_2)$, если $K_1\subset K_2$. Тогда для ранжирования вершин в графе можно использовать решение кооперативной игры в виде значения Шепли\,---\,Майерсона.
В работах [12, 13] было показано, что в случае, когда  характеристическая функция $v(K), K\subset V_\eta$, определена как количество всех простых путей длины $m$ в подграфе $K$, то значение  Майерсона для  игрока $i$ равно
\begin{equation}
\label{eq:phi_i_m}
\varphi_i^m=\frac{a_m(i)}{m+1},
\end{equation}
где $a_m(i)$ есть число простых путей длины $m$, проходящих через вершину $i$. Пути $i_1,i_2,...,i_k$ и $i_k,...,i_2,i_1$ считаются одинаковыми.



\begin{figure}[h!]
\centering{
\includegraphics[scale=1]{05/fig1}

\vskip 2mm {\small{\it Рис. 1.} Граф из четырех вершин } }
\end{figure}



%\begin{center}
%    \includegraphics[width=0.2\linewidth]{example1_tr.png}
%	\newpicture {}
%	\caption{Граф из 4 вершин}
%	\label{fig:example_1}
%\end{center}

Например, для графа из четырех вершин, представленного на рис. 1, для
$m=2$ значение Майерсона для игрока $2$ равно $\varphi_2^2=4/3$, поскольку через вершину 2 проходят 4 простых пути: $(1,2,3)$, $(1,2,4)$, $(2,3,4)$ и $(2,4,3)$. Следовательно, $\varphi_2^2=4/3=1.333$. А для игрока 1 величина Майерсона $\varphi_1^2=2/3=0.666$, поскольку через вершину 1 проходят лишь два пути длины 2:
$(1,2,3)$ и $(1,2,4)$.

Вершины с высоким значением Майерсона играют большую роль в структуре графа, вершины с небольшим --- не так важны. Покажем это на примере графа, изображенного на рис. 2. В табл.~1 приведены значения Майерсона, вычисленные для различных значений $m$. Видно, что, например, для вершины 5 центральность сильно варьируется. Если для $m=1$ эта вершина имеет минимальный ранг, то при $m=4$ он максимальный.



\begin{figure}[h!]
\centering{
\includegraphics[scale=1]{05/fig2}

\vskip 2mm {\small{\it Рис. 2.} Изменение величин $m$ в графе из девяти вершин } }
\end{figure}


%\begin{center}
%    \includegraphics[width=0.5\linewidth]{example2_tr.png}
%	\newpicture {}
%	\caption{Изменение величин m в графе из 9 вершин}
%	\label{fig:example2}
%\end{center}





%\vskip 2mm
\begin{table}[h!]
\begin{center}
{\small

{\it Таблица 1.} {\bf Значения центральности вершин графа для различных \emph{m}}%

}

\vskip 3mm

{\footnotesize

\begin{tabular}{|c|c|c|c|c|c|c|c|c|c|}
\hline

 & \multicolumn{9}{c|}{Вершина}  \\\cline{2-10}
\raisebox{5pt}[1pt]{$m$} & 1 &  2 &  3 &  4 & 5 & 6&7&8&9 \\\hline
$1$ & 1 & 1 & 1.5 & 1 & 1 & 1 &1.5 &1 &1 \\\hline
$2$ & 1.33 & 1.33 & 2 & 1 & 1 & 1&2&1.3&1.3 \\\hline
$3$ & 0.75 & 0.75 & 1.25 & 1.5 &1.5 & 1.5& 1.25 & 0.75 & 0.75 \\\hline
$4$ & 0.6 & 0.6 & 1 & 1.4 & 1.8 & 1.4&1&0.6&0.6 \\\hline

$5$ & 0.5 & 0.5 & 1 &1.33 & 1.33 & 1.33&1&0.5&0.5 \\\hline
$6$ & 0.57 & 0.57 & 0.86 & 0.86 & 0.86 & 0.86&0.86&0.57&0.57 \\\hline
$7$ & 0.75 & 0.75 & 1 & 1 & 1 & 1 &1&0.75&0.75 \\\hline
\end{tabular}

}
\end{center}\vspace{-3mm}
\end{table}
%\vskip 2mm

\textbf{\emph{3.2. Решение многокритериальной задачи. }}
В работе [9] было предложено в качестве характеристической функции рассматривать многочлен вида
$$
v(K,r)=\sum\limits_{m=1}^\infty A_m(K) r^m,\quad K\subseteq N, \  \ 0 \le r \le 1,
$$
здесь $A_m(K)$  ---  количество простых путей длины $m$ в подграфе, порожденном множеством вершин $K$. Тогда значение  Майерсона для  игрока $i$ будет равно [12, 13]
\begin{equation*}
\varphi_i(r)=\sum\limits_{m=1}^\infty \frac{a_m(i)}{m+1} r^m,\quad i\in N,
\end{equation}
где $a_m(i)$ --- число простых путей длины $m$, проходящих
через вершину $i$.  Например, для графа, представленного на рис. 1, значение Майерсона для игрока 2 будет равно
\begin{equation}
\label{eq:phi_2_r}
\varphi_2(r)=\frac{3}{2}r+\frac{4}{3}r^2+\frac{2}{4}r^3.
\end{equation}
%
Заметим, что выражение (\ref{eq:phi_2_r}) зависит от параметра $r$. Варьируя параметр от 0 до 1, можно получать различные порядки ранжирования вершин.

Можно предложить альтернативный подход, используя для ранжирования вершин альтернативные методы на основе турнирной матрицы, которая составляется следующим образом.

Рассмотрим двух игроков (две вершины) $i$ и $j$. Сравнивая значения Майерсона для различных $m$, в матрице $R_{ij}$ ставим 1 (выигрыш), если ранг $i$ в большинстве случаев выше, чем у $j$,
 ставим 0 (проигрыш), если ранг $i$ в большинстве случаев ниже, чем у $j$, и $1/2$ (ничья), иначе.
 Так, для графа, изображенного на рис. 2, по значениям, приведенным в табл. 1, турнирная матрица имеет вид
 \begin{equation}
    \label{eq:r_mat}
    R= \begin{pmatrix}
      \cdot   &\frac{1}{2}&0&0&0&0&0&\frac{1}{2} & \frac{1}{2}\\
         \frac{1}{2} &\cdot&0&0&0&0&0&\frac{1}{2} & \frac{1}{2}\\
         1 &1&\cdot&0&0&0&\frac{1}{2}&1& 1\\
          1 &1&1&\cdot&0&\frac{1}{2}&1&1& 1\\
             1 &1&1&1&\cdot&1&1&1& 1\\
              1 &1&1&\frac{1}{2}&0&\cdot&1&1& 1\\
             1 &1&\frac{1}{2}&0&0&0&\cdot&1& 1\\
               \frac{1}{2}   &\frac{1}{2}&0&0&0&0&0&\cdot & \frac{1}{2}\\
         \frac{1}{2} &\frac{1}{2}&0&0&0&0&0&\frac{1}{2} & \cdot\\
        \end{pmatrix}.
\end{equation}
 Например, если сравнить игроков 5 и 3, то игрок 5 проигрывает игроку 3 для $m=1,2$, выигрывает у игрока 3 для $m=3,4,5$ и у игроков ничья для  $m=6, 7$. Поэтому $ R_{53}=1$, соответственно $R_{35}=0$.

В работе [21] был предложен теоретико-игровой подход ранжирования игроков на основе турнирной матрицы.  При таком подходе характеристическая функция может быть определена следующим образом. Положим $v(N)=1$ и для коалиции $K\subset N$ получим, что
\begin{equation*}
v(K)=\max_{i\in K} \min_{j\in N\setminus K} R_{ij}.
\end{equation*}
Затем в качестве ранжирования можно использовать любое решение кооперативной игры: значение Шепли, N- или  C-ядро.

Можно также воспользоваться правилом Борда. В соответствии с этим правилом нужно сложить в каждой строке турнирной матрицы все ранги и ранжировать игроков согласно этому суммарному рангу.  В частности,  для турнирной матрицы  (\ref{eq:r_mat})  эти ранги равны соответственно $1.5,  1.5, 4.5, 6.5, 8, 6.5, 4.5, 1.5, 1.5 $.  Таким образом,  для графа,  представленного на рис. 2,  победителем является вершина 5, поскольку игрок~5 выигрывает у любого из игроков (так называемый победитель Кондорсе).


Заметим, что в качестве значений центральности было рассмотрено значение Майерсона. Для его вычисления по формуле (\ref{eq:phi_i_m}) нужно найти число всех простых путей определенной длины, проходящих через данную вершину. Это не простая вычислительная задача. Была предложена модификация значения Майерсона [14], которая проще для вычислений. Идея этого представления заключается в том, что в каждом простом пути вершина~$i$, для которой вычисляется вектор Майерсона, встречается один раз. Тогда $a_m(i)$ можно трактовать как чиcло появлений вершины~$i$  во всех простых путях длины~$m$.
В [14] описана модификация центральности по Майерсону, где центральность $k$-го порядка вершины $i$ --- это число появлений вершины $i$ в путях длины $k$, включая циклы. Вектор $\sigma(k)$ --- вектор центральностей вершин графа $G$, $i$-я компонента которого равна $$\sigma_i(k)=\frac{s_i(k)}{k+1},  \ i=1,...,n,$$где $s_i(k)$ --- суммарное число появлений вершины $i$ в путях длины $k$, вычисляемое по формуле
\begin{equation*}
s_i(k)=\sum^n_{j=1}{a^{(k)}_{ij}}+\sum^n_{l=1}\left[{a_{li}\sum^n_{j=1}{a^{(k-1)}_{ij}}
+a^{(2)}_{li}\sum^n_{j=1}{a^{(k-2)}_{ij}}+\ldots+a^{(k)}_{li}}\right].
\end{equation}
В этом выражении $ a^{(k)}_{ij}$ --- элементы матрицы смежности, возведенной в соответствующую степень $k$. Именно этот метод и будет использоваться при ранжировании текстов в данной работе.

Существующие меры центральности имеют как положительные, так и отрицательные стороны. Например, мера betweenness centrality [4] учитывает только кратчайшие пути между вершинами, в то же время как информация может распространяться по произвольным путям в сети. Наиболее популярной является мера PageRank [3], основанная на предельном распределении случайного блуждания по вершинам графа. Ее вычисление требует нахождения обратной фундаментальной матрицы гигантского  размера. Однако это один из самых быстрых методов. Но его оценки также вызывают критику. Так, центральности всех вершин графа, изображенного на рис.~3, по методу  PageRank одинаковы и равны $1/6$. В то же время значение Майерсона для вершин $1$ и $3$ различаются и равны, в частности, для  $m=2$ соответственно $\varphi_1^2=$ $6/3=2, \ \varphi^2_3= 9/3=3$. Это более отвечает нашему представлению о центральности вершин $1$ и $3$ в таком графе.



\begin{figure}[h!]
\centering{
\includegraphics[scale=1]{05/fig3}

\vskip 2mm {\small{\it Рис. 3.} Сравнение величин центральности вершин графа 1 и 3, \\ полученных по методу Page Rank и значению Майерсона\\ } }
\end{figure}


\textbf{4. Построение графа на основе коллекции новостных текстов. }
Программная часть реализована в среде Jupyter на языке Python 3 и использованием инструментов NumPy, Scikit-learn, NLTL, а также различных библиотек для обработки и представления данных. Для хранения данных применялись базы SQLite и PostgreSQL, а также формат GraphML для представления графовых моделей.

Для практического эксперимента была выбрана коллекция из 500 статей новостного портала <<Петрозаводск Говорит>>. Для каждой новости были собраны параметры \verb|node_id| --- идентификатор новости на сайте, \verb|title| --- заголовок новости, \verb|body| --- текст новости.

Получение данных с сайта было реализовано при помощи кравлера, выполнявшего последовательный проход по страницам, базируясь на инкрементации \verb|node_id|, которая в случае отсутствия статьи с таким идентификатором игнорировалась. Все статьи записывались в исходном виде в базу данных для последующей обработки.

Тексты новостей прошли предварительную обработку в несколько этапов:

1) удаление новостей, которые связывают по искусственным характеристикам. Это такие новости, как «Топ-5»  и «Обзор недели», которые создавали нерелевантные связи, так как основывались на популярности или попадании во временной отрезок, а не на содержании;

2) техническая очистка текста, т. е. удаление символов, которые не относятся к русскому алфавиту, склеивание двойных пробелов в один, удаление табуляций и переносов, приведение всех символов к строчным. Данный этап необходим для упрощения модели, так как удаляемые параметры не имеют влияния на семантические связи;

3) формирование множества слов коллекции документов было произведено при помощи пакета ruts с дополнительной опцией удаления слов, которые являются междометиями, союзами и прочими несодержательными для анализа конструкциями. Затем при помощи пакета NLTK были выделены лексемы.

Мешок слов построен с помощью TF-IDF токенайзера из пакета sklearn. В данном пакете мера IDF вычисляется по следующей формуле:
\begin{equation*}
    idf_w = \ln{ \frac{1 + M}{1 + df_w}},
\end{equation}
где $M$ --- число документов в обрабатываемом корпусе; $df_w$ --- количество документов, содержащих слово $w$.
Полученный вектор --- мешок слов --- нормализуется при помощи евклидовой нормы.

Для сокращения размерности векторов $b(d_i)$ из полученного множества лексем $L$ были удалены лексемы $l_j$, для которых $b_{l_j} < 0.09$. Это значение было выбрано эмпирически, на основе визуального анализа значимости удаляемых элементов.

Затем при помощи вычисления косинусной меры из библиотеки \verb|scipy| была построена матрица сходства $C$, которая была преобразована в матрицу смежности $I$ с пороговым значением $c_{th} = 0.72$, также определенным эмпирически с по\-мощью анализа выделяемых групп. На рис. 4 представлен граф, построенный на основе полученной матрицы $I$.


\begin{figure}[h!]
\centering{
\includegraphics[scale=1.1]{05/fig4}

\vskip 2mm {\small{\it Рис. 4.} Общий граф коллекции новостных текстов }
}
\end{figure}
В результате были выбраны девять подграфов, содержащих более пяти вершин. Дальнейший анализ выявил, что тексты, образовавшие такие подграфы, тесно связаны семантически: $G_1$ --- граф, содержащий документы о прогнозе погоды, $G_2$ --- новости о розыске МВД, $G_3$ --- дорожно-транспортные происшествия, $G_4$ --- граф, образованный документами, содержащими новости о бывшем вице-премьере правительства Республики Карелия, $G_5$ --- театральные новости, $G_6$ --- автомобильные пожары, $G_7$~--- документы, описывающие новости мэрии Петрозаводска, $G_8$ --- бюджет Республики Карелия, $G_9$ --- новости о военнослужащих. Выбранные подграфы иллюстрирует рис.~5,~{\it a}--{\it з}.




\textbf{5. Результаты ранжирования текстов. } В данном разделе приведены результаты ранжирования текстов новостного портала с помощью модифицированного метода Майерсона, алгоритма PageRank и по правилу Борда.

Рассмотрим граф $G_1$, представленный на рис.~6. Для его вершин вычислим величины центральностей порядка $k$, на их основе проведем ранжирование по правилу Борда, а также рассчитаем значения PageRank со стандартными параметрами (табл.~2).

Для сравнения результатов значения центральности вершин, полученные с помощью модифицированного метода Майерсона при $k=5$, числовые величины, характеризующие важность вершин, определенные с помощью алгоритма PageRank, и ранги, построенные на основе турнирной матрицы по правилу Борда, нормируются. Кривые на рис. 7 позволяют визульно оценить результаты ранжирования.

Предложенный график дает возможность однозначно определить схожесть результатов, полученных тремя методами. Стоит отметить, что наибольшие значения получены для одной и той же вершины. Таким образом, ранжирование текстов с помощью модифицированного метода Майерсона или по правилу Борда может быть предложено в качестве альтернативы алгоритму PageRank.\pagebreak



%\vskip 2mm
\begin{table}[h!]
\begin{center}
{\small

{\it Таблица 2.} {\bf Результаты ранжирования вершин графа $G_1$}%

}

\vskip 3mm

{\footnotesize

\begin{tabular}{|c|c|c|c|c|c|c|c|}
\hline
{Вершина} & \emph{k} = 1 & \emph{k} = 2 & \emph{k} = 3 & \emph{k} = 4 & \emph{k} = 5 & PageRank & Правило Борда \\\hline
1 & 5 & 36 & 265 & 2036 & 15 698 & 0.035 & 13\\\hline
2 & 12 & 110 & 928 & 7632 & 62 023 & 0.074 & 23\\\hline
3 & 2 & 6 & 27 & 159 & 1029 & 0.013 & 1\\\hline
4 & 13 & 118 & 1000 & 8321 & 67 952 & 0.08 & 25\\\hline
5 & 4 & 20 & 131 & 907 & 6614 & 0.031 & 7\\\hline
6 & 4 & 22 & 145 & 1009 & 7337 & 0.027 & 9\\\hline
7 & 12 & 110 & 947 & 7909 & 64 931 & 0.075 & 24\\\hline
8 & 3 & 13 & 75 & 483 & 3365 & 0.020 & 6\\\hline
9 & 5 & 47 & 363 & 2977 & 23 804 & 0.035 & 18\\\hline
10 & 10 & 86 & 711 & 5767 & 46 446 & 0.063 & 21\\\hline
11 & 5 & 36 & 262 & 1992 & 15 267 & 0.032 & 12\\\hline
12 & 2 & 12 & 69 & 494 & 3477 & 0.018 & 5\\\hline
13 & 4 & 36 & 269 & 2167 & 17 010 & 0.030 & 14\\\hline

\end{tabular}

}
\end{center}\vspace{-3mm}
\end{table}
\pagebreak

\begin{table}[h!]
\begin{center}
{\small

{\it Окончание таблицы 2} %

}

\vskip 3mm

{\footnotesize

\begin{tabular}{|c|c|c|c|c|c|c|c|}
\hline

{Вершина} & \emph{k} = 1 & \emph{k} = 2 & \emph{k} = 3 & \emph{k} = 4 & \emph{k} = 5 & PageRank & Правило Борда \\\hline

14 & 5 & 33 & 231 & 1703 & 12 842 & 0.034 & 10\\\hline
15 & 6 & 47 & 362 & 2861 & 22 533 & 0.040 & 17\\\hline
16 & 1 & 1 & 4 & 20 & 122 & 0.017 & 0\\\hline
17 & 7 & 55 & 434 & 3449 & 27 315 & 0.044 & 19\\\hline
18 & 1 & 9 & 53 & 387 & 2727 & 0.012 & 4\\\hline
19 & 9 & 75 & 600 & 4804 & 38 306 & 0.069 & 20\\\hline
20 & 2 & 5 & 28 & 166 & 1156 & 0.027 & 2\\\hline
21 & 1 & 6 & 40 & 265 & 1883 & 0.013 & 3\\\hline
22 & 12 & 104 & 869 & 7134 & 57 800 & 0.076 & 22\\\hline
23 & 5 & 36 & 257 & 1976 & 15 104 & 0.040 & 11\\\hline
24 & 6 & 38 & 289 & 2172 & 16 703 & 0.038 & 15\\\hline
25 & 5 & 45 & 339 & 2760 & 21 808 & 0.034 & 16\\\hline
26 & 3 & 21 & 144 & 1051 & 7889 & 0.024 & 8\\\hline

\end{tabular}

}
\end{center}\vspace{-3mm}
\end{table}
%\vskip 2mm



\begin{figure}[h!]
\centering{
\includegraphics[scale=1]{05/fig5}

\vskip 2mm {\small{\it Рис. 5.} Выбранные подграфы, содержащие более пяти вершин \\}
{\footnotesize{{\it а} --- $G_2$, {\it б}~--- $G_3$, {\it в}~--- $G_4$, {\it г}~--- $G_5$, {\it д}~--- $G_6$, {\it е}~--- $G_7$, {\it ж}~--- $G_8$, {\it з}~--- $G_9$ }\\

}

\end{figure}


\pagebreak

\begin{figure}[h!]
\centering{
\includegraphics[scale=0.85]{05/fig6}

\vskip 2mm {\small{\it Рис. 6.} Граф $G_1$} }
\end{figure}



\begin{figure}[h!]
\centering{
\includegraphics[scale=0.85]{05/fig7}

\vskip 2mm {\small{\it Рис. 7.} Значения центральности вершин, полученные с помощью\\ модифицированного метода Майерсона при \emph{k} = 5 ({\it 1}), алгоритма PageRank ({\it 2})\\ и на основе турнирной матрицы по правилу Борда ({\it 3})} }
\end{figure}
\pagebreak




Сравнение значений на остальных графах по итогам работы с коллекцией новостных текстов дает аналогичную картину. Результаты представлены на рис.~8,~{\it а}--{\it з}.


\begin{figure}[h!]
\centering{
\includegraphics[scale=0.99]{05/fig8}

\vskip 2mm {\small{\it Рис. 8.} Сравнение метода Майерсона ({\it 1}), алгоритма PageRank ({\it 2}) и правила Борда ({\it 3})} }
\end{figure}




\textbf{6. Заключение. }
В работе продемонстрировано, что в задачах ранжирования текстов применим теоретико-игровой подход. Описан процесс работы с корпусом текстов новостного портала, построена графовая модель данного корпуса. В качестве методов ранжирования предлагаются модифицированный метод Майерсона в кооперативной игре, опирающийся на число путей в графе фиксированной длины, включая циклы, а также правило Борда на основе турнирной матрицы.
 Схожесть результатов ранжирования позволяет прийти к выводу о возможности применения модифицированного метода Майерсона и правила Борда для анализа корпуса текстов наравне с~повсеместно распространенным алгоритмом PageRank.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\newpage
\input{05/lit-ra}

%\newpage
\input{05/ref-s}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%{\footnotesize

%\thispagestyle{empty}
%
\vskip 3mm
%
\thispagestyle{empty} %очищаем стиль страницы
\thispagestyle{fancy} %включаем пользовательский стиль
\renewcommand{\headrulewidth}{0pt}%
\fancyhead[LO]{}%
\fancyhead[RE]{}%
\fancyfoot[LO]{\footnotesize{\rm{Вестник~СПбГУ.~Прикладная~математика.~Информатика...~\issueyear.~Т.~18.~Вып.~\issuenum}}
\hfill}%
\fancyfoot[RE]{\hfill\footnotesize{\rm{Вестник~СПбГУ.~Прикладная~математика.~Информатика...~\issueyear.~Т.~18.~Вып.~\issuenum}}}%
% для оформления нижнего колонтитула
\cfoot{} %


%}
