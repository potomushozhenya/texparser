


\zagol{519.7}{М.~В.~Сотникова}{АЛГОРИТМ АВТОМАТИЧЕСКОГО УДЕРЖАНИЯ
\\КОЛЕСНОГО РОБОТА НА ВИЗУАЛЬНО ЗАДАННОЙ ЛИНИИ}{



\vspace{-3mm}\parindent=7mm



%{\copyright} А.~В.~Буре, 2014

\textit{Сотникова Маргарита Викторовна} --- кандидат
физико-математических наук, доцент; m.sotnikova@spbu.ru






\vskip 3mm

\emph{Sotnikova Margarita Viktorovna} --- candidate of physical
and mathematical sciences, associate professor;
m.sotnikova@spbu.ru

{\copyright} Санкт-Петербургский государственный университет, 2016


}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\thispagestyle{empty} %очищаем стиль страницы
\thispagestyle{fancy} %включаем пользовательский стиль
\renewcommand{\headrulewidth}{0pt}%
\fancyhead[LO]{}%
\fancyhead[RE]{}%
\fancyfoot[LO]{\hfill\thepage}%
\fancyfoot[RE]{\thepage\hfill}%
%\lhead{} %верхний колонтитул слева
%%\rhead{} % верхний колонтитул справа
% для оформления нижнего колонтитула
\cfoot{} %
%\lfoot{} %
%\rfoot{\thepage} %



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%$^{*)}$ Работа выполнена при финансовой поддержке
%Санкт-Петербургского государственного университета (грант
%№~6.0.24.2010).}


{\footnotesize \noindentСанкт-Петербургский государственный
университет, Россия, \\ 199034, Санкт-Петербург, Университетская
наб., 7--9



\vskip2.5mm


\begin{list}{}{\leftmargin=7mm \rightmargin=7mm \listparindent=5mm}


\item \hskip5mm Рассматривается задача синтеза управления, обеспечивающего автоматическое удержание полноприводного
колесного робота на~визуально заданной линии. Существо современных
подходов к~решению этой задачи состоит в~формализации понятия
отклонения текущего положения робота от~заданного пути на~основе
визуальной информации и~поискe такого  управления с~обратной
связью, которое обеспечивает сведение к~нулю нормы этого
отклонения. Основу предлагаемого подхода к~синтезу составляет
многоцелевая структура закона управления. Данная структура
позволяет обеспечить многоцелевую ориентацию системы, учитывающую
весь комплекс требований для достижения  желаемой динамики
в~конкретных вариантах функционирования объекта. Многоцелевая
структура вклю\-чает в~себя асимптотический  наблюдатель
и~динамический корректор, которые в~рамках описанной задачи служат
для оценки не\-из\-ме\-ряе\-мых компонент вектора скорости
и~обеспечения астатизма замкнутой системы по~отношению
к~постоянным или медленно ме\-няю\-щим\-ся внешним возмущениям.
Для иллюстрации полученных результатов выполняется\linebreak
имитационное моделирование алгоритмов управления в~среде MATLAB.
Библиогр.\linebreak 7~назв. Ил.~3.

{\it Ключевые слова}: визуально заданная линия, камера,
многоцелевая структура, колесный робот.

\end{list}

}

\vskip2mm

\noindent{\it M. V. Sotnikova}

\vskip2mm \noindent{\bf ALGORITHM FOR VISUAL PATH FOLLOWING \\ BY
WHEELED FULLY ACTUATED MOBILE ROBOT}

\vskip2.5mm


{\footnotesize


\noindent St.~Petersburg State University, 7--9, Universitetskaya
nab.,\\ St.~Petersburg, 199034, Russia

\vskip2.5mm

\begin{list}{}{\leftmargin=7mm \rightmargin=7mm \listparindent=5mm}

\item \hskip5mm The paper is devoted to control algorithms design for autonomous mobile robots with the use of visual information in the feedback loop. The problem of visual path following by a fully actuated wheeled mobile robot is considered. The essence of the used approach is to minimize the error between desired and actual position of the given path in the image plane of the camera. The basic idea of synthesis is that the observed path in the image plane must pass through the center point of the bottom of the screen and the direction of the tangent to this path must coincide with the direction of the velocity vector of the robot. These requirements should be satisfied after homographic mapping from camera image plane to the horizontal plane, which is parallel to the plane of robot motion. The proposed approach makes use of a multipurpose control structure that provides an estimate for unmeasured component of the velocity vector and gives a compensation for constant or slowly varying disturbances. Refs~7. Figs~3.

\textit{Keywords}: visual path, camera, multipurpose structure,
wheel robot.

\end{list}

}


\vskip3mm

\textbf{1. Введение.} В~настоящее время все более широкое
распространение получают автономные подвижные объекты, способные
решать практически важные задачи без участия человека. К~ним
относятся автономные подводные и~надводные подвижные аппараты,
воздушные объекты, например квадрокоптеры, наземные колесные или
гусеничные роботы. Автономное функционирование подвижного объекта
возможно только при наличии автоматической системы управления,
получающей информацию об окружающей среде при помощи датчиков,
установленных на~борту объекта. При этом многие прикладные задачи
невозможно или неэффективно решать без визуальной информации,
снятой с~помощью малогабаритной бортовой видеокамеры.

Известны два подхода к~применению визуальной информации в~контуре
обратной связи. Первый из~них обеспечивает достижение цели
управления посредством минимизации нормы ошибки расхождения между
желаемым и~действительным положениями наблюдаемого объекта
в~плоскости изображения. Второй вариант предполагает
 учет визуальной информации для трехмерной реконструкции наблюдаемой сцены, а~затем применение полученного
результата в~законах управления~[1].

Важно отметить, что существующая общая теория управления
с~визуальной ин-формацией в~обратной связи подразумевает, что
камера имеет шесть степеней свободы и~может свободно перемещаться
в~пространстве конфигураций. Это обстоятельство  не~позволяет
непосредственно использовать соответствующие алгоритмы для
управления подвижными объектами с~собственной дополнительной
динамикой и~меньшим числом степеней свободы.

В п. 2 и~3 рассматривается задача синтеза управления,
обеспечивающего автоматическое удержание полноприводного колесного
робота на~визуально заданной линии. В~частности, на~практике
подобная линия может обозначать контур дороги, трубопровод
и~т.\,д. Современные подходы к~решению этой задачи базируются
на~формализации понятия отклонения текущего положения робота
от~заданного пути на~основе визуальной информации и~поиске такого
управления с~обратной связью, которое обеспечивает сведение к~нулю
нормы этого отклонения [2--4].

В отличие от~известных алгоритмов предлагаемый подход к~синтезу
базируется на~многоцелевой структуре закона управления [5],
которая позволяет обеспечить многоцелевую ориентацию системы,
учитывающую весь комплекс требований для достижения  желаемой
динамики в~конкретных вариантах функционирования объекта.
Многоцелевая структура включает в~себя асимптотический наблюдатель
и~динамический корректор, которые в~рамках описанной задачи служат
для оценки неизмеряемых компонент вектора скорости и~обеспечения
астатизма замкнутой системы по~отношению к~по\-стоян\-ным или
медленно меняющимся внешним возмущениям.

Для иллюстрации полученных результатов выполняется имитационное
моделирование алгоритмов управления в~среде MATLAB (см. п. 4).


\textbf{2. Постановка задачи.} Введем следующие системы координат.
Пусть $Ox'y'z'$~--- неподвижная система координат, связанная
с~Землей, $O_{r}xyz$~--- система координат, связанная с~роботом.
Обе системы координат являются правыми. При этом плоскость $Ox'y'$
--- горизонтальная плоскость движения робота, а~ось $Oz'$
направлена вертикально вниз. В~связанной системе координат ось
$O_rz$ сонаправлена с~продольной составляющей скорости робота, ось
$O_ry$ направлена вертикально вниз, а~ось $O_rx$~--- на~правый
борт робота.

Математическая модель динамики полноприводного колесного робота,
движущегося на~плоскости, имеет вид
\begin{equation}
\begin{aligned}
&\dot {\bf {\nu}} = {\bf \tau} + {\bf d}(t), \\
&\dot {\bf \eta} = {\bf R}(\bf \eta) {\bf \nu},
\end{aligned}
\end{equation}
где ${\bf \tau} = \left( \tau_u, \tau_v, \tau_\omega \right)^T$
--- управляющие силы и~момент; ${\bf \nu} = \left(  u,v,p
\right)^T$~--- вектор скорости, компонентами которого являются
проекции линейной и~угловой скоростей робота на~оси связанной
системы координат: $u$ ~--- продольная и~$v$ ~--- поперечная
составляющие скорости, $p$ ~--- угловая скорость вращения робота.
Вектор ${\bf d} (t)$ опреде\-ляет внешние возмущения, вызванные,
например, ветровыми воздействиями, а~вектор  ${\bf \eta} =
(x',y',\psi)^T$~--- положение центра масс $(x',y')$  и~курсовой
угол $\psi$ движения робота по~отношению к~неподвижной системе
координат. Угол $\psi$ образуется осями координат  $Oz$, $Ox'$
и~отсчитывается от~оси $Ox'$  против часовой стрелки. Система (1)
содержит единственную нелинейность, обусловленную ортогональной
матрицей поворота
\begin{equation}
{\bf R}(\bf \eta) = {\bf R}(\psi) = \left (
\begin{array}{ccc}
\cos \psi & -\sin \psi & 0 \\
\sin \psi & \cos \psi & 0 \\
0 & 0 & 1
\end{array}
\right ).
\end{equation}

На подвижном объекте (1), (2) установлена видеокамера, которая
может перемещаться и~вращаться только вместе с~корпусом робота,
т.~е. не~имеет дополнительных степеней свободы. Будем считать, что
центр масс робота и~оптический центр камеры совпадают. Тогда
связанная система координат $O_r xyz$  одновременно является
системой координат камеры. Обозначим $(X,Y,Z)$ пространственные
координаты произвольной точки сцены в~системе координат камеры
(робота). Тогда, согласно модели перспективного преобразования,
соответствующие ей координаты в~нормированной плоскости
изображения равны [6]
\begin{equation}
\tilde{x} = \frac{X}{Z},~~~ \tilde{y} = \frac{Y}{Z}.
\end{equation}
Уравнения (3) представляют измеряемые величины. Будем также
полагать, что измеряется вектор $\bf{\eta}$ координат робота.
С~учетом (3) отображение точки трехмерного пространства,
находящейся в плоскости $Ox'y'$ движения робота, на~плоскость
изображения камеры осуществляется по~формулам
\begin{equation}
\tilde{x} = \frac{X}{Z},~~~ \tilde{y} = \frac{h_{\rm cam}}{Z}.
\end{equation}
Здесь $h_{\rm cam}$~--- высота установки камеры над землей. Будем
в~дальнейшем полагать, что визуально заданная линия расположена
в~плоскости движения робота  $Ox'y'$. Такой линией может быть
разметка дорожной полосы, линия трубопровода и~др. Для решения
задачи удержания робота на~линии необходимо на~каждом такте
функционирования цифровой системы управления обрабатывать
поступившее вновь изображение с~целью извлечения из~него искомого
контура. Разработка соответствующих алгоритмов представляет
отдельную задачу и~не предлагается в~данной статье.

Отметим также, что в~работе рассматривается нормированная
плоскость изображения [6], в~которой введена система координат
$O_c\tilde{x}\tilde{y}$, причем ее оси $O_c\tilde{x}$
и~$O_c\tilde{y}$  сонаправлены с~осями  $O_rx$ и~$O_ry$
соответственно, а~начала координат $O_r$ и~$O_c$ совпадают. Таким
образом, точка $O_c$ находится в~центре экрана.

Пусть визуально заданная линия в~плоскости изображения камеры
представ\-ляется уравнениями
\begin{equation}
\tilde{x} = \tilde{x} (s),  ~~~  \tilde{y} = \tilde{y} (s).
\end{equation}
Здесь $s$~--- вещественный параметр, определяющий положение точки
на визуально заданной кривой. Отметим, что кривая (5) является
результатом проекции точек кривой $l$ в~трехмерном пространстве,
заданной уравнениями
$$
X = X(s), ~~~ Y = h_{\rm cam}, ~~~ Z  = Z(s),
$$
на плоскость изображения в~соответствии с~формулами (4). Поставим
задачу синтеза управления для колесного робота с~уравнениями
динамики (1), (2), которое обеспечивает его движение вдоль
визуально заданной кривой (5). Иными словами, цель управления~---
минимизация разности между текущими координатами робота $(x'(t),
y'(t))$ и~координатами ближайшей к~роботу точки $(x_r{'}(t),
y_r{'}(t))$ на~кривой $l$, находящейся в~плоскости движения
робота, т.\,е. обеспечение равенства
\begin{equation}
\lim_{t \to +\infty} {\rho (t)} = 0,
\end{equation}
где $\rho(t) = \sqrt {(x'(t) - x_r'(t))^2 + (y'(t) - y_r'(t))^2}$.
В дальнейшем будем считать, что робот должен перемещаться вдоль
визуально заданной линии с~постоянной по~модулю линейной скоростью
$v$.


\textbf{3. Разработка алгоритмов управления для движения
по~визуально заданной линии.} Рассмотрим задачу формирования
управления, обеспечивающего достижение цели (6), т.~е. движение
робота по~визуально заданной линии (5), в~частности по~прямой.
Идея синтеза заключается в~том, чтобы указанная линия в~плоскости
изображения проходила через точку с~координатами $(0, h_{\rm
max})$, где $h_{\rm max}$~--- максимальное значение ординаты
в~системе координат изображения, т.~е. через центральную точку
внизу экрана. И, более того, направление касательной к~визуально
заданной линии должно совпадать с~направлением вектора скорости
робота, если отобразить плоскость изображения на~горизонтальную
плоскость, параллельную плоскости дороги.

В рамках данной работы предлагается алгоритм управления для
полноприводного колесного робота. Распространение методологии
такого алгоритма на~неполноприводные объекты, представленные
моделью (1), является предметом дальнейших исследований.

Для пояснения разрабатываемого алгоритма рассмотрим
вспомогательную вир\-туаль\-ную камеру, расположенную над
плоскостью движения робота так, что ее плоскость изображения
параллельна плоскости $Ox'y'$. Будем считать, что с~этой камерой
связаны новая система координат $O_w \bar{x}\bar{y}\bar{z}$
и~система координат $O_v \bar{x}_v\bar{y}_v$ для нормированной
плоскости изображения. Положение виртуальной камеры относительно
системы координат камеры робота определяется вектором
параллельного переноса $\bf{t}$ и~матрицей поворота $\mathbf{R}$
следующего вида:
$$
\bf{t} = \left (
\begin{array}{c}
0 \\ -h_v \\ z_v
\end{array}
\right)\!, ~~~ \bf{R} = \left(
\begin{array}{ccc}
1 & 0 & 0 \\
0 & 0 & -1 \\
0 & 1 & 0
\end{array}
\right)\!.
$$
Здесь $h_v$ и~$z_v$~--- высота и~смещение вперед виртуальной
камеры относительно камеры робота. Как видно из~приведенных
формул, оптическая ось $O_w\bar{z}$ виртуальной камеры направлена
вертикально вниз. Следовательно, то изображение, которое
получается в~плоскости этой камеры, является <<видом сверху>>.

Плоскость движения робота в~системе координат камеры $O_r xyz$
определяется уравнением ${\bf n}^T {\bf r} + d = 0$, где ${\bf n}
= \left(0 \,\,1\,\, 0\right)^T,\,\, d = -h_{v}$,~ ${\bf r}$~---
радиус-вектор произвольной точки плоскости. Тогда координаты
соответствующих друг другу точек в~плоскости изображения камеры
робота и~виртуальной камеры связаны соотношением

\begin{equation}
{\bf x}_v = {\bf Hx},
\end{equation}
в котором ${\bf H} = {\bf R} - {\bf t}\dfrac{{\bf n}^T}{d}$~---
матрица гомографии [6], а~векторы ${\bf x}$  и~${\bf x}_v$
пред\-став\-ляют однородные координаты точек на~изображениях
камеры робота и~виртуальной камеры соответственно. Компоненты
векторов $\bf x$ и~${\bf x}_v$ обозначим следующим образом: ${\bf
x} = \left ( w\tilde{x}, w\tilde {y}, w  \right)$,~ ${\bf x}_v =
\left ( \lambda\bar{x}, \lambda\bar {y}, \lambda\right)$, где
$\lambda$ и~$w$~--- вещественные параметры. Тогда с~учетом формул
(5) и~(7) изображение линии, полученное камерой робота, можно
взаимно-однозначно отобразить на~плоскость виртуальной камеры.
Полученное таким образом изображение является <<видом сверху>> для
отслеживаемой линии. В~качестве примера на~рис.~1 приведено
изображение одной и~той же линии в~плоскости камеры робота
и~виртуальной камеры. В~дальнейшем при разработке алгоритмов
управления будем использовать изображение виртуальной камеры.



%\begin{figure}[h]
%\begin{center}
%\includegraphics[scale=0.5]{Sotnikova-1.eps}
%\caption{\small Сопоставление изображений камеры робота (слева)
%и~виртуальной камеры (справа) }
%\end{center}
%\end{figure}


\begin{figure}[h!]
\centering
\includegraphics[scale=1]{10/fig1}
\vskip 3mm \caption{Сопоставление изображений камеры робота (слева) }%\label{метка}
\centering \vspace{0.5mm} \small{и~виртуальной камеры (справа) }
\end{figure}

Введем следующие обозначения: $e_x = \bar{x}$, ~$e_y =
\bar{y}-h_{\mathrm{max}}$~--- разность между фактическим
положением $(\bar{x},\bar{y})$ нижней точки визуально заданной
линии в~плоскости изображения виртуальной камеры и~желаемым ее
положением $(0, h_{\mathrm{max}})$. Отметим, что координата
$\bar{y}$ может отличаться от~величины $h_{\mathrm{max}}$, если
рассматриваемая линия не~пересекает прямую $y = h_{\mathrm{max}}$.

На основе законов теоретической механики и~модели перспективного
преобразования выведем уравнения, которые связывают перемещение
камеры и~изменение ошибок $e_x, e_y$. Рассмотрим систему координат
виртуальной камеры, которая перемещается вместе с~камерой робота.
Пусть $\bar{v}$ и~$\bar{u}$~--- проекции вектора линейной скорости
виртуальной камеры на~оси связанной системы координат $O_w
\bar{x}$ и~$O_w \bar{y}$ соответственно, а~\,$\omega$~--- ее
угловая скорость. Тогда в~соответствии с~уравнениями, приведенными
в~работе~[1], и~с~учетом движения виртуальной камеры только
в~горизонтальной плоскости в~данном случае получаем такую модель:
\begin{equation}
\begin{aligned}
&\dot {\bar{X}} = -\bar{v}+\omega \bar{Y}, \\
&\dot {\bar{Y}} = -\bar{u}-\omega \bar{X}, \\
&\dot{\bar{Z}} = 0,  ~~~ \bar{Z} = h_{v}.
\end{aligned}
\end{equation}
Здесь $(\bar{X}, \bar{Y}, \bar{Z})$~--- координаты произвольной
точки, находящейся в~плоскости движения робота, относительно
системы координат виртуальной камеры. Далее, согласно модели
перспективного преобразования, имеем
\begin{equation}
\bar{x} = \frac{\bar{X}}{\bar{Z}} = \frac{\bar{X}}{h_{v}}, ~~~
\bar{y} = \frac{\bar{Y}}{\bar{Z}} = \frac{\bar{Y}}{h_{v}}.
\end{equation}

С учетом формул (8), (9) получаем следующую модель относительного
движения виртуальной камеры и~наблюдаемой точки трехмерного
пространства:
$$
\begin{aligned}
&\dot {\bar{x}} = -\frac{\bar{v}}{h_{v}}+\omega \bar{y}, \\
&\dot {\bar{y}} = -\frac{\bar{u}}{h_{v}}-\omega \bar{x}.
\end{aligned}
$$
Отсюда следует, что изменение ошибок $e_x$ и~$e_y$ описывается
уравнениями
\begin{equation}
\left (
\begin{array}{c}
\dot{e}_x \\
\dot {e}_y
\end{array}
\right ) = \left (
\begin{array}{ccc}
0 & -\dfrac{1}{h_{v}} & \bar{y} \\
-\dfrac{1}{h_{v}} & 0 & -\bar{x}
\end{array}
\right ) \left (
\begin{array}{c}
\bar{u} \\ \bar{v} \\ \omega
\end{array}
\right )\!.
\end{equation}
Заметим, что проекции линейной скорости виртуальной камеры
и~компонент линейной скорости самого робота связаны соотношениями
\begin{equation}
u = -\bar{u}, ~~~ v =  \bar{v}, ~~~  p = \omega.
\end{equation}
Итак, уравнения (10) и~(11) будем в~дальнейшем рассматривать как
модель для ошибки смещения нижней точки визуально заданной линии
от центральной точки~$(0, h_{v})$ в~плоскости изображения
виртуальной камеры.

Обратимся теперь к~выводу условия сонаправленности векторов
касательной к~визуально заданной линии в~плоскости изображения
виртуальной камеры и~линейной скорости робота. Пусть $X = X(s),
\,\,Y = h_{\mathrm{cam}}, \,\,Z = Z(s)$~--- параметрические
уравнения визуально заданной линии относительно системы координат
камеры в~текущий момент времени. Тогда направляющий вектор
касательной в~каждой точке этой кривой равен
$$
{\bf a}(s) = \left( \dot{X}(s), 0, \dot{Z}(s)  \right)^T.
$$
Отсюда направление касательной в~каждой точке кривой относительно
системы коор\-динат виртуальной камеры определяется по~формуле
\begin{equation}
{\bf a}_v(s) = {\bf R}{\bf a}(s).
\end{equation}
В (12) ${\bf R}$~--- приведенная выше матрица поворота. Введем
угол $\theta$
\begin{equation}
\theta = \arctg \frac{-a_2}{a_1}.
\end{equation}
В формуле (13) $a_1$ и~$a_2$~--- первая и~вторая компоненты
вектора ${\bf a}_v$. Нетрудно убедиться в~том, что угол $\theta$
определяет направление касательной к~визуально заданной линии
в~плоскости виртуальной камеры. Причем этот угол отсчитывается
от~направления оси $O_w\bar{x}$ против часовой стрелки. Заметим,
что угол $\theta$ равен $\pi/2$, если направление касательной
совпадает с~направлением вектора линейной скорости движения
робота. В~связи с~этим введем величину ошибки расхождения между
направлением скорости и~направлением касательной
\begin{equation}
e_{\theta} = \frac{\pi}{2}-\theta.
\end{equation}
Объединяя формулы (10) и~(14), получаем следующие уравнения,
которые описывают отклонение нижней точки наблюдаемой кривой
от~центра экрана и~разность между направлениями касательной
и~скорости робота:
\begin{equation}
\dot {{\bf e}} = {\bf L}({\bf e}){\bf v}.
\end{equation}
В формуле (15)
$$
{\bf e} = \left (
\begin{array}{c}
e_x \\ e_y \\ e_{\theta}
\end{array}
\right )\!, ~~~ {\bf L} = \left (
\begin{array}{ccc}
0 & -\dfrac{1}{h_{v}} & e_y+h_{\rm max} \\
-\dfrac{1}{h_{v}} & 0 & -e_x \\
0 & 0 & -1
\end{array}
\right )\!, ~~~ {\bf v} = \left (
\begin{array}{c}
\bar{u} \\ \bar{v} \\ \omega
\end{array}
\right )\!.
$$

В соответствии с~методом, предложенным в~[1], будем формировать
управление таким образом, чтобы обеспечить экспоненциальное
убывание ошибки расхождения между фактическим и~желаемым
положениями визуально заданной линии, по~формуле
\begin{equation}
{\bf v} = -\mu{\bf L}^{-1}{\bf e},
\end{equation}
где $\mu > 0 $~--- вещественное число, характеризующее скорость
убывания нормы вектора ошибки. В~результате уравнения замкнутой
системы (15), (16) примут вид
$$
\dot{\bf e} = -\mu{\bf e}.
$$

Вектор скорости $\bf{v} = v^{*}$, определяемый по~формуле (16),
можно рассматривать в~качестве заданного сигнала, подлежащего
обработке при помощи управляющего\linebreak  воздействия $\bf
\tau$ модели~(1). Будем считать, что на~объект управления
действует пос\-тоянное или медленно меняющееся возмущение ${\bf d}
(t)$. В~отсутствиe возмущений заданная скорость обеспечивается
пропорциональным регулятором вида
\begin{equation}
{\bf \tau} = {\bf \tau}^{*} = -{\bf K}_d (\nu - \nu^*),
\end{equation}
в котором ${\bf K}_d$~--- произвольная положительно определенная
матрица. Здесь векторы заданных скоростей $\bf{v}^*$ и~$\nu^*$
связаны равенством (11). Но при наличии внешних возмущений данный
закон управления приводит к~ненулевой ошибке воспроизведения
заданного командного сигнала. Кроме того, для реализации закона
(17) необходимо измерять или оценивать текущее значение скорости.

В связи с~указанными обстоятельствами введем в~рассмотрение
многоцелевую структуру закона управления
\begin{equation}
\begin{aligned}
&\dot {\bf{z}}_\nu = \tau+{\bf R}^T(\eta){\bf K}_1 ({\bf \eta} - {\bf z_\eta}), \\
&\dot {\bf{z}}_\eta = {\bf R}(\eta){\bf{z}}_\nu + {\bf K}_2 ({\bf \eta} - {\bf z_\eta}), \\
& \tau = -{\bf K}_d ({\bf{z}}_\nu - \nu^*) + {\bf F}(p)({\bf \eta}
- {\bf z_\eta}).
\end{aligned}
\end{equation}

\noindent Первые два уравнения в~структуре (18) представляют
асимптотический наблюдатель, а~второе слагаемое в~уравнении,
определяющем управляющий сигнал, является динамическим
корректором. Настраиваемыми параметрами в~структуре (18) служат
матрицы ${\bf K}_1$ и~${\bf K}_2$ асимптотического наблюдателя,
а~также матрица ${\bf{F}} (p)$ динамического корректора.
В~работе~[7] показано, что при отсутствии внешних возмущений
сходимость оценок асимптотического наблюдателя обеспечивается для
любых по\-ло\-жи\-тель\-но\-оп\-ре\-де\-лен\-ных матриц ${\bf
K}_1$ и~${\bf K}_2$, имеющих диагональную структуру. Будем
полагать, что данные матрицы выбраны исходя из~этого условия.

Обратимся к~вопросу устойчивости положения равновесия в~замкнутой
системе (1), (18). Вначале запишем уравнение динамического
корректора в~пространстве состояний

$$
\begin{aligned}
&\dot {\bf{p}} = {\bf \alpha}{\bf p} + {\bf \beta}({\bf \eta} - {\bf z_\eta}), ~~~%\\
&{\bf \xi} = {\bf \gamma}{\bf p} + {\bf \mu}({\bf \eta} - {\bf
z_\eta}),
\end{aligned}
$$
\vskip 2mm \noindentгде $\bf {p}$~--- вектор состояния корректора;
${\bf F}(s) = {\bf \gamma}({\bf E}_l s - {\bf \alpha})^{-1}{\bf
\beta} + {\bf \mu}$. Как показано в~[7], достаточным условием
устойчивости положения равновесия служит гурвицевость матрицы
${\bf \alpha}$ корректора.

Рассмотрим условие обеспечения астатизма при наличии постоянного
возмущения ${\bf d} (t) = {\bf d}_0 \cdot 1(t)$ в~модели (1).
Будем считать, что для этого возмущения замкнутая система имеет
положение равновесия, которому соответствует равенство $\psi  =
\psi_0$. Проводя рассуждения, аналогичные приведенным в~[7],
получаем следующее условие обеспечения астатизма в~замкнутой
системе:

$$
{\bf F}(0) = {\bf K}_\Delta = -{\bf K}_d {\bf M}_{11} {\bf
M}_{21}^{-1}-{\bf R}^T (\psi_0){\bf K}_1.
$$
\vskip 2mm \noindentЗдесь матрицы ${\bf M}_{11}$ и~${\bf M}_{21}$
определяются из~условия
$$
\left (
\begin{array}{cc}
{\bf M}_{11} & {\bf M}_{12} \\
{\bf M}_{21} & {\bf M}_{22}
\end{array}
\right) = \left (
\begin{array}{cc}
{\bf 0} &  {\bf R}^T(\psi_0){\bf K}_1\\
{\bf R}(\psi_0) & {\bf K}_{2}
\end{array}
\right ) ^{-1}.
$$

\vskip 2mm Таким образом, закон управления, обеспечивающий
автоматическое удержание робота на~визуально заданной линии,
определяется уравнениями (11), (16), (18), причем настраиваемые
параметры многоцелевой структуры (18) должны выбираться с~учетом
указанных выше условий.

\textbf{4. Пример имитационного моделирования алгоритмов
управления.} Используем разработанные алгоритмы управления для
случая, когда визуально заданная линия представляет собой прямую
линию. Примем следующие значения параметров алгоритма управления:
$\mu = 10,~ h_v = 5,~ z_v = 20$. Рассмотрим прямую, которая
в~начальный момент времени в~системе координат камеры описывается
уравнениями

$$
Z(s) = s, ~~~ X(s)=1.
$$

\vskip 2mm Как видно на~рис.~2, на~котором показана динамика
компонент вектора ошибки $e_x$ и~$e_y$, нижняя точка визуально
заданной линии на~изображении устанавливается в~центр, т.~е.
в~точку с~координатами $(0, h_{\rm max})$  примерно за~2 с.
%\begin{figure}[h]
%\begin{center}
%\includegraphics[scale=0.35]{Sotnikova-2.eps}
%\caption{\small Изменение ошибок $e_x$ (слева) и~$e_y$ (справа)
%при движении робота }
%\end{center}
%\end{figure}

\begin{figure}[h!]
\centering
\includegraphics[scale=1]{10/fig2}
\vskip 1mm \caption{Изменение ошибок $e_x$ (слева) и~$e_y$
(справа) при движении робота }%\label{метка}
\end{figure}

На рис.~3 для сравнения приведены заданная относительно мировой
системы координат прямая линия, по~которой должен перемещаться
робот, и фактический путь робота при движении с~использованием
алгоритма управления (16), (18). Из~рисунка вытекает, что данный
алгоритм обеспечивает следование робота вдоль заданного
пути.\newpage
%\begin{figure}[h]
%\begin{center}
%\includegraphics[scale=0.4]{Sotnikova-3.eps}
%\caption{\small Изменение ошибок $e_x$ и~$e_y$ при движении
%робота. }
%\end{center}
%\end{figure}

\begin{figure}[h!]
\centering
\includegraphics[scale=1]{10/fig3}
\vskip 1mm \caption{Фактический путь робота и заданная линия движения}%\label{метка}
\end{figure}


\textbf{5. Заключение.} Рассмотрена задача управления движением
полноприводного колесного робота вдоль визуально заданной линии.
Предложен алгоритм управления, базирующийся на~использовании
многоцелевой структуры, обеспечивающий\linebreak достижение цели
управления  с~компенсацией постоянных возмущений. Распространение
методологии этого алгоритма на~неполноприводные объекты является
предметом дальнейших исследований.




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\input{10/lit-ra}

\input{10/ref-s}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


{\footnotesize




\vskip 2mm

%\thispagestyle{empty}



\thispagestyle{empty} %очищаем стиль страницы
\thispagestyle{fancy} %включаем пользовательский стиль
\renewcommand{\headrulewidth}{0pt}%
\fancyhead[LO]{}%
\fancyhead[RE]{}%
\fancyfoot[LO]{\footnotesize{\it{Вестник~СПбГУ.~Сер.~10.~Прикладная~математика.~Информатика...~2016.~Вып.~1}}
\hfill}%
\fancyfoot[RE]{\hfill\footnotesize{\it{Вестник~СПбГУ.~Сер.~10.~Прикладная~математика.~Информатика...~2016.~Вып.~1}}}%
%\lhead{} %верхний колонтитул слева
%%\rhead{} % верхний колонтитул справа
% для оформления нижнего колонтитула
\cfoot{} %
%\lfoot{} %
%\rfoot{\thepage} %


\noindent Статья рекомендована к~печати проф. Е.~И.~Веремеем.

\vskip 1mm

\noindent Статья поступила в~редакцию 26 ноября 2015~г.

}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%\vskip 5mm


%{\footnotesize

%\noindent К\,о\,н\,т\,а\,к\,т\,н\,а\,я\,
%и\,н\,ф\,о\,р\,м\,а\,ц\,и\,я\nopagebreak

%\vskip 3mm

%\emph{Басков Олег Владимирович}~--- аспирант, ассистент; e-mail:
%ov.japh@gmail.com

%\vskip 2mm

%\emph{Baskov Oleg Vladimirovich}~--- postgraduate student; e-mail:
%ov.japh@gmail.com

%}



%\thispagestyle{empty}
