


{\small

\noindent $\issueyear$
\emph{ВЕСТНИК\,САНКТ-ПЕТЕРБУРГСКОГО\,УНИВЕРСИТЕТА Сер.\,10}
Вып.\,$\issuenum$\linebreak

}

%\ \\ \vskip 0.8mm\hrule \\ \hrule \\ \ \\

\vskip -2.5mm

\hline\vskip .5mm

\hline

\vspace{1.25cm} \noindent {\uppercase Процессы управления}
\vspace{1.25cm}

\noindent{\footnotesize УДК 623.746.-519+681.5.09+681.5.015}

\vskip2mm

\noindent{\it O.~В.~Баранов}

\vskip2mm

\noindent{\bf УПРАВЛЕНИЕ КВАДРОКОПТЕРОМ \\ В~АВАРИЙНЫХ РЕЖИМАХ
ФУНКЦИОНИРОВАНИЯ}

\efootnote{

\vspace{-3mm}\parindent=7mm


%{\copyright} Н. А. Валиотти, 2014

{\it Баранов Олег Владимирович}~---  аспирант; o.baranov@spbu.ru





\vskip 3mm

\textit{Baranov Oleg Vladimirovich}~--- post-graduate student;
o.baranov@spbu.ru




%$^{*}$ Работа выполнена при финансовой поддержке Российского фонда
%фундаментальных исследований (грант \mbox{№~14-01-31521 мол-а})
%и~Санкт-Петербургского государственного университета (НИР, проект
%\mbox{№~9.38.205.2014}).

{\copyright} Санкт-Петербургский государственный университет, 2016


}

\vskip2mm

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\thispagestyle{empty} %очищаем стиль страницы
\thispagestyle{fancy} %включаем пользовательский стиль
\renewcommand{\headrulewidth}{0pt}%
\fancyhead[LO]{}%
\fancyhead[RE]{}%
\fancyfoot[LO]{{\footnotesize\emph{DOI: 10.21638/11701/spbu10.2016.207 } }\hfill\thepage}%
\fancyfoot[RE]{\thepage\hfill{\footnotesize\emph{DOI: 10.21638/11701/spbu10.2016.207 } } }%
%\fancyfoot[LO]{\hfill{\fontsize{10.5}{10.5}\selectfont \thepage}}%
%\fancyfoot[RE]{{\fontsize{10.5}{10.5}\selectfont \thepage}\hfill}%
%\lhead{} %верхний колонтитул слева
%%\rhead{} % верхний колонтитул справа
% для оформления нижнего колонтитула
\cfoot{} %
%\lfoot{} %
%\rfoot{\thepage} %



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

{\footnotesize \noindentСанкт-Петербургский государственный
университет, Российская Федерация, \\ 199034, Санкт-Петербург,
Университетская наб., 7--9



\vskip3mm

\begin{list}{}{\leftmargin=7mm \rightmargin=7mm \listparindent=5mm}

\item \hskip5mm В~статье вводится понятие аварийного режима и~рассматривается
задача управления беспилотным летательным аппаратом (БПЛА)~---
квадрокоптером в~аварийном режиме функционирования. Основной
особенностью аварийного режима управления автономным БПЛА является
затруднение или невозможность приема сигналов от~спутников
глобальных навигационных систем. Это может произойти в~случае
попадания аппарата в~электромагнитное поле различных технических
объектов, в~условиях плотной городской застройки или высокогорья,
а~также в~арктических районах. В~военной сфере необходимость
наличия особого режима продиктована возможным воздействием на~БПЛА
средств <<радиоэлектронной борьбы>>. В~настоящей работе
рассматриваются несколько различных подходов к~решению задачи.
Приводятся результаты численного моделирования процесса аварийной
посадки аппарата с~использованием критерия качества. Предлагается
схема подмены навигационного сигнала путем внедрения инерциальной
навигационной системы без аппаратной модификации аппарата.
Библиогр. 17 назв. Ил. 4.

{\it Ключевые слова}: БПЛА, квадрокоптер, аварийный режим,
оптимальное управление.

\end{list}

}

\vskip4mm

\noindent{\it O.~V.~Baranov}

\vskip2mm\noindent{\bf QUADROCOPTER CONTROL IN EMERGENCY MODE}

\vskip2mm



{\footnotesize

\noindent St.~Petersburg State University, 7--9, Universitetskaya
nab.,\\ St.~Petersburg, 199034, Russian Federation


\vskip3mm

\begin{list}{}{\leftmargin=7mm \rightmargin=7mm \listparindent=5mm}

\item \hskip5mm In this paper the concept of quadrocopter control in
emergency mode problem is introduced and considered. Emergency
control mode for the autonomous UAV can be characterized primarily
by the difficulty or impossibility of receiving signals from
global satellite navigation  systems. This can happen if the UAV
falling into the electromagnetic field of various technical
objects, in dense urban or high mountains, and also in arctic
regions. In the military area, presence of the special regime is
dictated by the possibility of using electronic warfare devices.
Several different approaches to solving the problem is offered.
The results of numerical simulation of the emergency landing using
a quality criteria are presented. The scheme of spoofing the
navigation signal by integrating inertial measurement unit without
hardware modification is proposed. Refs 17. Figs 4.

\textit{Keywords}: UAV, quadrocopter, emergency mode, optimal
control.

\end{list}

}

\vskip 3mm

\indent {\bf Введение.} В~настоящей работе рассматриваются
беспилотные летательные аппараты (БПЛА) вертолетного типа
с~четырьмя роторами~--- квадрокоптеры. В~силу своих конструктивных
особенностей они получили широкое распространение в~различных
сферах деятельности. Среди всех типов современных БПЛА именно
квадрокоптеры и~различные их модификации (БПЛА вертолетного типа
с~четным количеством роторов) обладают самой высокой
маневренностью и~стабильностью полета, имея при этом относительно
невысокую стоимость изготовления базовой несущей платформы.
Возможность квадрокоптера неподвижно висеть в~одной точке делает
его идеальным средством для наблюдения за~различными объектами.

В то же время для БПЛА такого типа необходима сложная система
стабилизации положения аппарата в~пространстве [1, 2]. Для решения
этой задачи на~борту \mbox{БПЛА} устанавливается
специализированная система управления полетом, вклю\-чаю\-щая
в~себя множество высокочувствительных датчиков [2, 3]. Работа
большинства из~них зависит от~состояния среды, окружающей
квадрокоптер. Так, в~условиях даже относительно слабого
электромагнитного поля, создаваемого, например, вышками связи,
электронный компас, размещенный на~борту аппарата, будет выдавать
ложные результаты позиционирования. В~условиях плотной городской
застройки, высоко\-горья и~в~арктических районах затруднен прием
сигналов от~спутников глобальных на\-ви\-га\-цион\-ных систем
(GPS/ГЛОНАСС). В~военной сфере ситуация с~нестабильной работой
датчиков (и бортовой электроники в~целом) может быть связана
с~целенаправленным воздействием на~БПЛА так называемых «средств
радиоэлектронной борьбы».

В настоящее время, теория и~практика построения квадрокоптеров
достаточно хорошо разработана [2, 4--7]. Серийно изготавливаются
множество моделей полетных контроллеров и~других комплектующих для
самостоятельной сборки аппаратов.
%Сложной задачей в~разработке современного БПЛА вертолетного типа можно считать разработку эффективной и~надежной системы управления полетом [4, 5].

\indent {\bf Актуальность.} Наряду с~БПЛА самолетного типа
квадрокоптеры широко применяются для решения задачи контроля
за~протяженными линейными объектами (газо- и~нефтепроводами,
линиями электропередач)~[5]. Существующие нормы на~использование
радиочастот для гражданских БПЛА сильно ограничивают максимальную
дистанцию уверенной радиосвязи между квадрокоптером и~его
оператором.
%Разрешенные диапазоны для радиосвязи и~максимальная мощность передатчиков накладывают ограничение в~виде обязательного наличия прямой видимости между оператором и~аппаратом, что может быть невозможно в~горной и~лесистой местности, а~так же на~открытой местности на~малой высоте.

%В силу того, что длительный полет вдоль линейного объекта под контролем оператора невозможен, аппарат работает в~автономном режиме, т.к. заранее известен необходимый путь аппарата и~координаты контрольных точек.
В модельном ряду полетных контроллеров для квадрокоптеров
практически у~всех крупных производителей имеются версии
оборудования, позволяющие осуществлять автономный полет без
участия оператора [8]. Однако во~всех без исключения случаях
такого использования БПЛА подразумевается, что и~в~момент запуска,
и на~всем протяжении пути аппарата ему доступно определение своих
координат с~помощью систем спутниковой навигации (как правило,
системы GPS). Отметим, что, в~силу естественной ограниченности
энерговооруженности спутника, транслируемый им высокочастотный
навигационный сигнал может быть легко заглушен наземной
установкой, энергетические возможности которой несравненно выше.

Известно, что квадрокоптер теряет возможность автономной работы,
если невозможно определение его местоположения в~пространстве
с~применением спутниковых систем навигации при одновременной
потере (или изначальной невозможности) связи с~оператором. Такую
ситуацию следует считать аварийным режимом работы БПЛА.

%Приняв во~внимание возможность попадания квадрокоптера в~один из~указанных выше примеров неблагоприятных внешних условий, имеем ситуацию фактической невозможности выполнения полетного задания.
%При этом речь не~идет о~полной потере живучести аппарата, однако, единственное, что могут предложить известные на~данный момент разработки в~области систем управления БПЛА в~такой ситуации - это попытка сохранения аппарата путем его немедленной посадки [6, 7].

В то же время существуют математические модели управления БПЛА, которые не~подразумевают обязательно использовать сигналы от~спутниковых навигационных систем, а~также некоторых других датчиков [1, 2]. %Как правило, эти модели имеют достаточно общий характер и~на~реальных аппаратах в~полной мере не~используются, но могут оказаться весьма полезны в~аварийных режимах.
В настоящей работе предложен один из~возможных вариантов
интеграции математических моделей полета в~систему управления БПЛА
с целью повышения <<живучести>> аппарата.


\indent {\bf 3. Система управления. Общая постановка задачи.}
Рассмотрим роль различных элементов системы управления аппаратом
при автономном его управлении.
На современные квадрокоптеры могут устанавливаться следующие датчики (сенсоры): %\\
1)~цифровой барометр (требует калибровки перед вылетом);
2)~трехосевой гироскоп; 3)~трехосевой акселерометр; 4)~электронный
компас (магнитомер) различных модификаций (требует калибровки
перед вылетом); 5)~аппаратура спутникового позиционирования
(GPS/ГЛОНАСС/Бейдоу); 6)~лазерные измерители расстояния (редко).

%Рассмотрим два случая работы аппарата в~воздухе.

%{\bf Первый случай. Полет при непосредственном участии оператора в~управлении аппаратом.} В~этом случае задача управления движением фактически сводится к~стабилизации аппарата в~пространстве и~трансляции сигналов управления к~исполнительным механизмам (системе управления и~набортному оборудованию). Известно, что для решения задачи стабилизации квадрокоптера бортовой управляющей системе аппарата достаточно данных всего с~двух датчиков: (2) и~(3). Установка датчиков (1) и~(4) повышает надежность стабилизации, но не~обязательна. С~учетом того, что оба этих датчика требуют калибровки перед каждым запуском (магнитное поле земли, равно как и~атмосферное давление величины динамические), часто системы управления БПЛА настроены так, что обращаются к~данным с~этих датчиков, только если не~поступают сигналы от~датчиков (5) и~(6). Работа системы (5) в~таком режиме не~обязательна, т.к. оператор имеет возможность визуального контроля положения аппарата. Однако, при условии штатной работы системы (5) резко повышается комфортность работы оператора. Аппарат может самостоятельно компенсировать влияние ветра, более точно «зависать» в~необходимой точке. Датчик (6) используется только на~относительно небольших (обычно до~100 м) расстояниях для проведения высокоточных измерений (например, измерений высоты или измерений точного расстояния от~объекта до~БПЛА или от~объекта до~объекта). Таким образом, при наличии визуального контроля за~работой БПЛА со~стороны оператора и~исправно работающего канала связи, имеем ситуацию, когда для работы БПЛА достаточно всего двух датчиков: (2) и~(3).


%{\bf Второй случай. Автономный полет аппарата.} В~силу указанных выше причин, «ручное» управление БПЛА не~всегда возможно.

В случае автономного полета, даже при условии верной калибровки
датчиков №~1 и~4, полет квадрокоптера возможен только при штатной
работе системы №~5. Существенно важными являются данные датчика №
1: они незаменимы для верной ориентации аппарата в~пространстве
при остановках и~малых скоростях движения. Датчик №~4 используется
в~качестве вспомогательного определителя высоты, основным
источником данных по~высоте остается система спутниковой навигации
(№~5). Датчик №~6, как правило, включается в~работу одним
из~последних. В~силу ближнего радиуса действия он помогает
избежать столкновения.


Потеря сигнала от~спутников фактически «ослепит» автономный БПЛА.
В этом случае будет невозможно не~только выполнить полетное
задание, но и~автоматически возвратиться на~точку старта. Штатными
алгоритмами существующих контроллеров управления БПЛА в~этом
случае, как правило, подразумевается следующее поведение~[8,~9]:
1)~неподвижное «зависание» в~точке потери сигнала до~момента его восстановления; %\\
2)~аварийная посадка при критическом уровне заряда батарей или
запаса топлива в~баках (при использовании энергетической установки
на топливных элементах).


Таким образом, задача управления БПЛА в~аварийном режиме может
быть в~общем виде сформулирована как задача управления аппаратом
при отсутствии сигнала от~внешней навигационной системы (или при
ее неисправности).


Предлагаются несколько подходов к~решению данной задачи:
использование математической модели квадрокоптера для
непосредственного управления исполнительными механизмами в~обход
неисправных датчиков и~замена сигнала от~неработающего датчика
данными, полученными в~результате обработки данных с~других
датчиков. Возможен также и~синергетический подход.

\indent {\bf Математическое моделирование процесса управления.}
Основные параметры квадрокоптера представлены на~рис.~1 [1].
\begin{figure}[h!]
\centering
\includegraphics[scale=1]{07/fig1}
\vspace*{-.5mm} \caption{Расчетная схема квадрокоптера }%\label{метка}
\end{figure}
%\begin{figure}[H]
%\parindent=4mm \includegraphics[scale=0.48]{123.png}
%\smallskip
%\caption{Расчетная схема квадрокоптера}
%\end{figure}


На аппарат действуют подъемные силы двигателей $F_{1}, F_{2},
F_{3}, F_{4}$, сила тяжести $F_{T}$. Точка $M$~--- центр масс
аппарата (совпадает с~геометрическим центром), $l$~--- расстояние
от центра аппарата до~точки приложения подъемных сил. Стрелками
$\Omega_{1},\Omega_{2},\Omega_{3},\Omega_{4}$ показаны направления
вращения винтов.

Неподвижная система координат жестко связана с~землей: ось~$X$
показывает на~север, $Y$~--- на~запад, $Z$~--- вверх по~отношению
к земле. Подвижная система координат жестко связана с~корпусом
аппарата: ось $X$ направлена вдоль направления движения
квадрокоптера вперед, $Y$~--- по~направлению квадрокоптера влево,
$Z$~--- вверх. Обе системы координат правосторонние [2].

Движение квадрокоптера можно считать суммой поступательного
движения цент\-ра масс и~сферического движения тела относительно
центра масс. Такое движение может быть описано следующей системой
дифференциальных уравнений [1]:

$$\frac{dx}{dt}=V_{x},~~ \frac{dy}{dt}=V_{y},~~ \frac{dz}{dt}=V_{z},$$
$$m\frac{dV_{x}}{dt}=(\sin{\psi}\sin{\phi}+\cos{\psi}\sin{\theta}\cos{\phi})U_{1},~$$
$$m\frac{dV_{y}}{dt}=(\sin{\psi}\sin{\phi}+\cos{\psi}\sin{\theta}\cos{\phi})U_{1},~$$
\begin{equation}
m\frac{dV_{z}}{dt}=U_{1}\cos\theta\cos\phi-mg,~ \label{0}
\end{equation}
$$\frac{d\Theta}{dt}=\omega_{\theta},~~ \frac{d\psi}{dt}=\omega_{\psi},~~ \frac{d\phi}{dt}=\omega_{\phi},~$$
$$I_{xx}\frac{d\omega_{\phi}}{dt}=(I_{yy}-I_{zz})\omega_{\theta}\omega_{\psi}-J_{TP}\omega_{\theta}\Omega+U_{2},~$$
$$I_{yy}\frac{d\omega_{\theta}}{dt}=(I_{zz}-I_{xx})\omega_{\psi}\omega_{\phi}+J_{TP}\omega_{\phi}\Omega+U_{3},~$$
$$I_{zz}\frac{d\omega_{\psi}}{dt}=(I_{xx}-I_{yy})\omega_{\psi}\omega_{\theta}+U_{4}.$$
Здесь \hbox{$x,y,z$}~--- координаты центра масс робота,
\hbox{$V_{x},V_{y},V_{z}$}~--- проекции вектора линейной скорости
робота, $\theta$~--- угол тангажа, $\phi$~--- угол крена, $\psi$
--- угол рыскания, $\omega_{\theta}$~--- угловая скорость тангажа,
$\omega_{\psi}$~--- угловая скорость рыскания, $m$~--- масса
робота, $I_{xx},I_{yy},I_{zz}$~--- моменты инерции вокруг осей
$x$, $y$ и~$z$ соответственно, $U_{1},U_{2},U_{3},U_{4}$~---
каналы управления БПЛА, $\Omega$~--- общая скорость четырех
винтов, $J_{TP}$~--- общий вращательный момент инерции вокруг оси
винта [1, 2]:

\begin{equation}
J_{TP}=J_{P}+\eta N^{2}J_{M}, \label{1}
\end{equation}
где $J_{M}$~--- момент инерции пропеллера; $N$~--- передаточное
отношение редуктора; $\eta$~--- КПД редуктора. Как правило, в~БПЛА
на электрической тяге редуктор не~ис\-поль\-зует\-ся, т.~е.
$N=\eta=1$ (см. (2)).

Приведем уравнения связи каналов управления
$U_{1},U_{2},U_{3},U_{4}$ со~скоростями вращения винтов
$\Omega_{1},\Omega_{2},\Omega_{3},\Omega_{4}$ [1, 2]:

$$U_{1}=b(\Omega_{1}^{2}+\Omega_{2}^{2}+\Omega_{3}^{2}+\Omega_{4}^{2}), \quad U_{2}=lb(-\Omega_{2}^{2}+\Omega_{4}^{2}), $$
\begin{equation}
U_{3}=lb(-\Omega_{1}^{2}+\Omega_{3}^{2}), \quad
U_{4}=d(-\Omega_{1}^{2}+\Omega_{2}^{2}-\Omega_{3}^{2}+\Omega_{4}^{2}),
\label{2}
\end{equation}
$$\Omega=-\Omega_{1}+\Omega_{2}-\Omega_{3}+\Omega_{4},$$
где $l$~--- расстояние между центром квадрокоптера и~центром
пропеллера; $b$ и~$d$~--- аэродинамические составляющие тяги
и~коэффициента сопротивления соответственно. Квадрокоптер
приводится в движение подсистемой приводов, а~именно за~счет
вращения пропеллеров, скорости вращения которых можно выразить
из~системы уравнений


$$\Omega_{1}=\sqrt{      \frac{1}{4b}U_{1}-\frac{1}{2bl}U_{3}-\frac{1}{4d}U_{4},                   }$$
\begin{equation}
\Omega_{2}=\sqrt{
\frac{1}{4b}U_{1}-\frac{1}{2bl}U_{2}+\frac{1}{4d}U_{4} },
\label{3}
\end{equation}
$$\Omega_{3}=\sqrt{      \frac{1}{4b}U_{1}+\frac{1}{2bl}U_{3}-\frac{1}{4d}U_{4},                   }$$
$$\Omega_{4}=\sqrt{      \frac{1}{4b}U_{1}+\frac{1}{2bl}U_{2}+\frac{1}{4d}U_{4}                   }.$$

Таким образом, можно определить задачу управления квадрокоптером
как задачу построения стратегии управления скоростями вращения
четырех моторов $\Omega_{1},\Omega_{2},\Omega_{3},\Omega_{4}$
(см.~(4)) так, чтобы обеспечить асимптотически устойчивое
положение квадрокоптера $x_{0},y_{0},z_{0}$ с~удержанием одного
из~углов (например, угла рыскания~$\phi_{0}$). При этом сама точка
$x_{0},y_{0},z_{0}$ выбирается в~соответствии с~полетным заданием.

Отметим, что рассмотренная модель является математической моделью
некоторого «идеального» аппарата с~четырьмя винтами, движущегося
в~среде без возмущений. Именно она дает представление о~характере
изменения наблюдаемых величин во~времени, а~также об их
зависимостях. Эмпирический подбор констант в~модели позволяет
достаточно точно приблизить расчетные результаты к~наблюдаемым
на~реальном аппарате [9--11], однако полностью заменить систему
управления квадрокоптером, по\-строен\-ную на~датчиках, такой
системой невозможно. Это объяснимо в~силу ограниченной точности
механического исполнения, зависимости базовых параметров набортной
аппаратуры от~температуры, влажности, уровня заряда батарей,
возмущений внешней среды и~т. д.

Применительно к~управлению аппаратом в~аварийном режиме модель
может быть использована следующим образом. Еще до~момента взлета
аппарата на~земле бортовой компьютер аппарата или наземный
вычислитель решает систему уравнений~(1) и~получает необходимые
значения $U_{1},U_{2},U_{3},U_{4}$
и~$\Omega_{1},\Omega_{2},\Omega_{3},\Omega_{4}$ в~соответствии
с~установленным полетным заданием. Далее, в~случае потери сигнала
спутниковой навигационной системы происходят переключения
управления двигателями аппарата на~величины
\begin{equation}
\Omega_{i}^{A}=\Omega_{i}+\Omega_{i}^{S},~~ i=\overline{1,4},
\label{stab}
\end{equation}
где $\Omega_{i}^{A}$~--- новые, аварийные угловые скорости
вращения моторов, а~$\Omega_{i}^{S}$~--- необходимые для
стабилизации аппарата от~внешних возбуждений добавки, вычисляемые
полетным контроллером штатно, в~соответствии с~показаниями
бортовых датчиков №~2--4.

\indent  {\bf Пример.} Математическое моделирование в~среде MATLAB
показало, что система (1) может применяться для задачи
стабилизации полета [4], а~также для задачи перевода аппарата
в~заданную точку.

Приведeм результаты моделирования возможной ситуации с~выводом
квадрокоптера из~аварийной ситуации (точка потери связи (10,5,15))
на точку старта (точка (0,0,0)). В~продолжение ранее проведенных
исследований задача была разрешена адаптивным методом [4, 7, 12]
с~критерием качества

$$\int\limits_{0}^{T} \sum_{i=1}^{4}  |U_{i}| \to \mathrm{min}. $$ Здесь $T$~--- момент времени завершения полета.

Выбор критерия качества такого вида объясняется тем, что при
посадке аппарата в~неблагоприятных условиях следует минимизировать
интегральные величины всех управляющих сигналов, таким образом
получая максимальную экономию топлива или заряда батарей на~случай
возможного восстановления связи.

На рис.~2 представлена траектория движения аппарата, на~рис.~3
приведены\linebreak
\begin{figure}[h!]
\centering
\includegraphics[scale=1]{07/fig2}
\vskip 2mm \caption{Перемещение квадрокоптера }%\label{метка}
\end{figure}
\begin{figure}[h!]
\centering
\includegraphics[scale=1]{07/fig3}
\vskip 2mm \caption{Управляющие сигналы }%\label{метка}
\end{figure}


\noindent построенные управляющие сигналы. Для расчета
использовались следующие параметры: $m = 1$ кг, $l = 0.6$ м, $b =
26.5\cdot10^{-6}$ Н$\cdot$с$^2$, $d = 0.6\cdot10^{-6}$
Н$\cdot$мс$^2$, $I_{xx}=I_{yy}=I_{zz}= 0.1$~Н$\cdot$мс$^2$,
$J_{TP} = 0.005$~Н$\cdot$мс$^2$, скорость вращения пропеллеров~---
5000 об./с.


%\begin{figure}[H]
%\parindent=4mm \includegraphics[scale=0.43]{xyz.jpg}
%\smallskip
%\caption{Перемещение квадрокоптера}
%\end{figure}
%
%\begin{figure}[H]
%\parindent=4mm \includegraphics[scale=0.43]{u.jpg}
%\smallskip
%\caption{Управляющие сигналы}
%\end{figure}


Вид построенных управляющих сигналов (кусочно-непрерывные функции)
обусловлен выбором метода [12, 16] и~критерия качества.

Алгоритм метода выбрал следующую стратегию управления. В~верхней
точке аппарат «отпускается» и~начинает контролируемо снижаться.
Управления $U_{2}, U_{3}$ кратковременно включаются для сдвига
аппарата в~направлении точки посадки. Далее аппарат снижается
в~заданном направлении под действием силы тяжести вплоть
до~момента следующего включения управления $U_{1}$ (точка $t=7$
c): набранная аппаратом вертикальная скорость «гасится» перед
посадкой.

Решение позволяет практически отказаться от~использования канала
управления $U_{4}$, а~также минимизировать управление
на~промежутке $3<t<7$ c, который назовем <<промежутком падения>>.

З\,а\,м\,е\,ч\,а\,н\,и\,е.\, На~реальном аппарате угловые скорости
$\Omega_{i},~ i=\overline{1,4}$, не~будут равны нулю даже
на~промежутке падения, так как в~зависимости от~внешних возмущений
всегда будут вычисляться необходимые стабилизирующие добавки
$\Omega_{i}^{S}$ по формуле (5). Получение отрицательных $U_{1}$
объясняется особенностью метода и~его реализации (линеаризация
и~др.). При внедрении на~реальный аппарат необходимо использовать
абсолютную величину [7, 12, 16, 17], устранив таким образом
несоответствие полученного управления с~формулой (3).

Таким образом, может быть достигнут положительный эффект
от~внедрения процедуры расчета движения аппарата по~математической
модели с~использованием критерия качества. При заранее известных
контрольных точках можно строить оптимальную стратегию управления
на весь маршрут движения, что особенно важно в~аварийных режимах
работы.

%\smallskip
\indent  {\bf Подмена сигнала.} Установленный на~БПЛА набор
датчиков, измеряющих чисто гравитационные характеристики (а
значит, менее подверженных влиянию электромагнитного излучения),
достаточно обширен. На~борту есть измерители ускорений (№ 3)
и~измерители углов (№ 2). Как было показано выше, рассматриваемая
задача управления БПЛА является аварийной, т.~е. возникает после
штатного старта, непосредственно в~полете аппарата. Будем считать,
что как минимум в~рамках процедуры штатного старта происходит
захват координат точки старта с~использованием спутниковых систем
навигации (№ 5). Именно такой режим рекомендуется ведущими
производителями полетных контроллеров. Случай, когда работа систем
спутникового позиционирования БПЛА нарушена через какое-то время
после старта, является аналогичным с~точки зрения дальнейших
построений.

Опишем ситуацию, когда известны относительно точные координаты
аппарата $x_{0}, y_{0}, z_{0}$ вплоть до~времени $t_{0}$.
Рассмотрим время $t$:
$$ t_{0}<t<t_{k}, $$
где $t_{k}$~--- критическое время, под которым понимается
расчетный момент израсходования топлива или заряда батарей. В~это
время сведения о~координатах аппарата от~спутниковых систем
навигации уже не~поступают, однако по-прежнему известны величины
\hbox{$V_{x},V_{y},V_{z}$}, $\theta$, $\phi$, $\psi$,
$\omega_{\theta}$, $\omega_{\psi}$. Они могут быть получены путем
обработки сигналов с~гироскопов и~акселерометров, т.~е. известен
весь необходимый набор исходных данных для расчета координат
аппарата путем их интегрирования. Фактически речь идет о~создании
набортной инерциальной навигационной системы (ИНС,~IMU)~[10,~11].

Приведем основные результаты для построения такой системы.

ИНС моделируют уравнения движения объекта --- уравнения Ньютона
для движения материальной точки в~инерциальной системе координат
[10,~11]
\begin{equation}
\mathbf{ \ddot r} = \mathbf{g} + \mathbf{p}, \label{5}
\end{equation}
где $\mathbf{r}$ --- радиус-вектор точки в~инерциальной системе
отсчета; $\mathbf{g}$~--- вектор гравитационного ускорения в~месте
положения точки, являющийся функцией положения объекта (т.~е.
имеем $\mathbf{g(r)}$); $\mathbf{p}$~--- вектор ускорения
от~действия внешних сил, т.~е. вектор кажущегося ускорения.
Навигационные координаты получаются двукратным интегрированием
уравнений
\begin{equation}
\mathbf{ \dot r }= \int\limits_{t_{0}}^{t}  \mathbf{(g+p)} d \tau,
\quad \mathbf{r} = \mathbf{ r_{0} } + \int\limits_{t_{0}}^{t}
\mathbf{\dot r } d\tau.  \label{6}
\end{equation}

Алгоритм интегрирования вместе с~функциональной зависимостью
$\mathbf{g(r)}$ есть исходная информация; $\mathbf{p}$ — первичная
информация, измеряемая датчиками; начальные значения вектора
$\mathbf{r_{0}}$ и~его производной $\mathbf{\dot r_{0}}$,
необходимые при интегрировании, есть начальная информация.
Очевидно, что инерциальной первичной информации в~принципе
достаточно для решения навигационной задачи.

Реализация решения навигационной задачи в~ИНС связана с~операциями
не над векторными (6), а~над скалярными величинами, которыми
являются текущие значения первичной информации. Естественно, что
и~навигационные алгоритмы, реа\-ли\-зуе\-мые в~полетном
контроллере, также суть скалярные операции. В~связи с~этим для
разработки навигационного алгоритма необходимо выполнить замену
исходных уравнений инерциальной навигации (6) и~(7) на~систему
скалярных уравнений. При этом существенную роль играет вид
первичной информации, который зависит от~положения базового
трехгранника осей чувствительности инерциальных датчиков [15].

Как правило, установленные на~БПЛА датчики выполнены по~МЭМС
технологии и~жестко связаны с~корпусом аппарата, т.~е. речь идет
о~создании  бесплатформенной инерциальной навигационной системы
(БИНС) [14]. Сигнал с~таких датчиков подвержен влиянию помех,
имеет в~своем составе «шум». Для минимизации влияния помех перед
интегрированием к~сигналу с~датчиков применяются специальные
фильтры, например фильтр Калмана или альфа-бета-фильтр.

Таким образом, предлагаемая к~внедрению система подмены сигнала
работает по~представленному на~рис.~4 алгоритму.
\begin{figure}[h!]
\centering
\includegraphics[scale=1]{07/fig4}
\vskip 2mm \caption{Принципиальная схема системы подмены сигнала }%\label{метка}
\end{figure}
%\begin{figure}[H]
%\parindent=4mm \includegraphics[scale=0.4]{44.png}
%\smallskip
%\caption{Принципиальная схема системы подмены сигнала}
%\end{figure}

Получение полноценной ИНС на~аппарате исключает необходимость
использования спутниковых навигационных систем, т.~е. фактически
ИНС полностью заменяет датчик № 5.

Данный подход требует дальнейшего исследования на~реальном
аппарате. Ключевыми факторами для возможности реализации схемы
подмены сигнала (внедрения ИНС) являются: 1) характер
зашумленности первичных данных для разных типов датчиков
в~различных режимах полета; 2) возможности полетного контроллера
по обработке полученных данных в~режиме реального времени; 3)
cкорость нарастания ошибки навигационных данных с~течением
времени.

%\smallskip
\indent{\bf Синергия.} Синергетический подход к~решению задачи
аварийного управления квадрокоптером может быть осуществлен путем
замыкания системы (1) скалярными составляющими $(x,y,z)$ вектора
$\mathbf{r}$, вычисленными по~формуле (7) начиная с~момента
времени $t_{0}$ (момент потери сигнала от~спутниковых систем
навигации).

%\smallskip

\indent{\bf Заключение.} В~настоящей работе сформулирована задача
управления квад\-ро\-коп\-те\-ром в~аварийном режиме, проведено
математическое моделирование процесса аварийной посадки аппарата
с~использованием критерия качества. Показан способ интеграции
расчетных данных в~систему управления реальным аппаратом.
Рассмотрен вопрос внедрения ИНС на~квадрокоптер без дополнительных
аппаратных модификаций аппарата. Приведена схема работы системы
подмены навигационного сигнала.

Следует отметить, что в~научной литературе по~теме либо
рассматриваются исключительно модельные задачи с~применением
различных математических методов [3, 14, 16], либо описывается
подход, при котором возникающие проблемы решаются путем установки
дополнительных устройств и~датчиков. При этом во~втором случае
слабо используются наработки и~результаты математического
моделирования, учитывающие специфику каждого из~типов БПЛА. В~этом
заключена особенность предлагаемого синергетического подхода.

Открытых данных по~работе ИНС на~квадрокоптерах мало. В~частных
проектах и~исследованиях по~данной тематике, как правило,
применяются готовые решения в~области ИНС [15]. При этом
технические характеристики дополнительно устанавливаемых датчиков
редко отличаются от~уже имеющихся на~БПЛА в~составе системы
стабилизации, т.~е. их внедрение нерационально. Кроме того,
готовые навигационные блоки, как правило, не~позволяют тонко
управлять процессом навигации, ибо их программное обеспечение
закрыто. Таким образом, исключается возможность реализации
синергетического подхода к~управлению аппаратом. Этот подход также
требует дополнительного изучения на~реальном аппарате.



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\newpage

\input{07/lit-ra}

\input{07/ref-s}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


{\footnotesize


%\thispagestyle{empty}

\vskip 3mm


\thispagestyle{empty} %очищаем стиль страницы
\thispagestyle{fancy} %включаем пользовательский стиль
\renewcommand{\headrulewidth}{0pt}%
\fancyhead[LO]{}%
\fancyhead[RE]{}%
\fancyfoot[LO]{\footnotesize{\it{Вестник~СПбГУ.~Сер.~10.~Прикладная~математика.~Информатика...~2016.~Вып.~2}}
\hfill}%
\fancyfoot[RE]{\hfill\footnotesize{\it{Вестник~СПбГУ.~Сер.~10.~Прикладная~математика.~Информатика...~2016.~Вып.~2}}}%
%\lhead{} %верхний колонтитул слева
%%\rhead{} % верхний колонтитул справа
% для оформления нижнего колонтитула
\cfoot{} %
%\lfoot{} %
%\rfoot{\thepage} %


\noindent Статья рекомендована к~печати доц. А. П. Жабко.


\vskip 1mm

\noindent Статья поступила в~редакцию 22 декабря  2015~г.


\vskip 1mm

\noindent Статья принята к печати 25 февраля 2016~г.

}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\vskip 5mm

%{\footnotesize

%\noindent К\,о\,н\,т\,а\,к\,т\,н\,а\,я\,
%и\,н\,ф\,о\,р\,м\,а\,ц\,и\,я \nopagebreak

%\vskip 3mm

%{\it Валиотти Николай Александрович}~--- аспирант; e-mail:
%nick.valiotti@gmail.com




%\vskip 2mm


%\textit{Valiotti Nikolay Aleksandrovich}~--- post-graduent student;
%e-mail: nick.valiotti@gmail.com




%}
